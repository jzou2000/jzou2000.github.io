<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<title>
    My Hugo
</title>

<link rel="stylesheet" type="text/css" href="/css/syntax.css">
<link rel="stylesheet" type="text/css" href="/css/site.css">

  

<script src='/js/vue.global.js'></script>
<script src='/js/vuex.js'></script>




</head>

<body>
    
 
<div class="header">
  <div class="nav-menu-bar">
    <ul class="nav-menu-bar">
    
      <li class="nav-menu">
        
          Core
          <div class="nav-menu-item">
            
              

  
  
    <a href="/core/algorithm/resources/">Algorithm</a>
  


            
              

  
  
    
      <a href="/core/c&#43;&#43;/debug/sysinternals/">C/C&#43;&#43;</a>
    
  


            
              

  
  
    
      <a href="/core/db/odbc/odbc-api-notes/">Database</a>
    
  


            
              

  
  
    <a href="/core/docker/install/">Docker</a>
  


            
              

  
  
    
      <a href="/core/git/p4/p4recipe/">Git</a>
    
  


            
              

  
  
    <a href="/core/java/load-overload/">Java</a>
  


            
              

  
  
    <a href="/core/jenkins/overview/">Jenkins</a>
  


            
              

  
  
    
      <a href="/core/linux/utils/diff/">Linux</a>
    
  


            
              

  
  
    <a href="/core/misc/vsc/">Misc</a>
  


            
              

  
  
    <a href="/core/network/mitmproxy/">Network</a>
  


            
              

  
  
    <a href="/core/open-source/apache/">Open Source</a>
  


            
              

  
  
    <a href="/core/python/shallow-or-deep/">Python</a>
  


            
              

  
  
    
      <a href="/core/rosetta/container/vector/">Rosetta</a>
    
  


            
              

  
  
    <a href="/core/security/ssh-key/">Security</a>
  


            
              

  
  
    
      <a href="/core/shell/bash/array/">Shell</a>
    
  


            
          </div>
        
      </li>
    
      <li class="nav-menu">
        
          Web
          <div class="nav-menu-item">
            
              

  
  
    <a href="/web/css/align/">CSS</a>
  


            
              

  
  
    <a href="/web/html/overview/">Html</a>
  


            
              

  
  
    <a href="/web/hugo/my-hugo-docker/">Hugo</a>
  


            
              

  
  
    <a href="/web/js/vsc-settings-javascript/">JavaScript</a>
  


            
              

  
  
    <a href="/web/misc/tools/">Misc</a>
  


            
              

  
  
    
      <a href="/web/svg/samples/embed-svg/">SVG</a>
    
  


            
              

  
  
    <a href="/web/vue/vue-quick-start/">Vue</a>
  


            
          </div>
        
      </li>
    
      <li class="nav-menu">
        
          IoT
          <div class="nav-menu-item">
            
              

  
  
    <a href="/iot/arduino/shopping/">Arduino</a>
  


            
              

  
  
    
      <a href="/iot/electronics/audio/microphone-array/">Electroincs</a>
    
  


            
              

  
  
    <a href="/iot/esp/esp32/">Esp</a>
  


            
              

  
  
    <a href="/iot/freecad/online-resources/">FreeCAD</a>
  


            
              

  
  
    <a href="/iot/general/emulator/">General</a>
  


            
          </div>
        
      </li>
    
      <li class="nav-menu">
        
          Blogs
          <div class="nav-menu-item">
            
              

  
  
    <a href="/blogs/2023/04/">2023</a>
  


            
              

  
  
    <a href="/blogs/blood-tests/results/">Blood Tests</a>
  


            
              

  
  
    <a href="/blogs/cancer/calender/">Cancer</a>
  


            
              

  
  
    
      <a href="/blogs/english/proverbs-of-day/200/">English</a>
    
  


            
              

  
  
    <a href="/blogs/recipe/begrette/">Recipe</a>
  


            
              

  
  
    <a href="/blogs/camino/sjpdp/">The French Camino</a>
  


            
              

  
  
    <a href="/blogs/travels/morocco/">Travels</a>
  


            
              

  
  
    <a href="/blogs/vancouver/bookmark/">Vancouver</a>
  


            
              

  
  
    <a href="/blogs/varicose/intro/">Varicose Veins</a>
  


            
              

  
  
    <a href="/blogs/workout/bookmarks/">Workout</a>
  


            
          </div>
        
      </li>
    
    
      <li class="nav-menu">
          Taxonomies
          
<div class="nav-menu-item">
    
    <a href='/categories'>categories</a>
    
    <a href='/tags'>tags</a>
    
</div>

      </li>
    
    </ul>
  </div>
</div>



    
<div>
  
<div class="nav-sidebar">
  
  

  
  
  
  <div class='nav-sidebar-title'>Vue</div>
  

  
  <div class='nav-sidebar-direct'>
  
    
      <a href="/web/vue/vue-access-dom/">accessing DOM</a>
    
  
    
      <a href="/web/vue/boilerplate/">boilerplate</a>
    
  
    
      <a href="/web/vue/bookmarks/">bookmarks</a>
    
  
    
      <a href="/web/vue/vue-diff/">diff with js</a>
    
  
    
      <a href="/web/vue/vue-dnd/">drag-n-drop</a>
    
  
    
      <a href="/web/vue/intro/">intro</a>
    
  
    
      <a href="/web/vue/vue-app-min/">minimal project setup</a>
    
  
    
      <a href="/web/vue/svg-elements/">process svg element</a>
    
  
    
      <a href="/web/vue/vue-async/">process svg element async</a>
    
  
    
      <a href="/web/vue/vue-quick-start/">quick start</a>
    
  
    
      <a href="/web/vue/resources/">resources</a>
    
  
    
      <a href="/web/vue/vue-svg-component-2/">svg components</a>
    
  
    
      <a href="/web/vue/vue-ui-tabs/">tabs by css</a>
    
  
    
      <a href="/web/vue/vue-ultralight/">ultra-light vue</a>
    
  
    
      <a href="/web/vue/vue-component/">vue component</a>
    
  
    
      <a href="/web/vue/vue-component-2/">vue component 2</a>
    
  
    
      <a href="/web/vue/vue-in-hugo/">vue in hugo</a>
    
  
  </div>
  
</div>

  <div class="content">
  <h1>Vue Component</h1>
  
  <style>
svg {
    background-color: lightcyan;
    margin: 4px;
}
</style>
<div id="app">
  <button @click='load'>Load</button>
  <button @click='sort("s1")'>Sort s1</button>
  <button @click='sort("s2")'>Sort s2</button>
  <br/>
  <data-set name='s1'></data-set>
  <data-set name='s2'></data-set>
</div>
<script>

async function sleep(n) {
    return new Promise((res,rej) =>{
        setTimeout(() => { return res() }, n)
    })
}

Vue.use(Vuex)
const theStore = new Vuex.Store({
    state: {
        ui_enabled: true,
        dataSet: {
            s1: [{value: 100, color: 'green'}],
            s2: [{value: 150, color: 'yellow'}],
        }
    },
    mutations: {
        ui_state: function(state, v) {
            state.ui_enabled = v
        },
        reset: function(state, name) {
            if (!(name in state.dataSet)) return
            state.dataSet[name].splice(0, state.dataSet[name].length)
        },
        add: function(state, payload) {
            let name = payload['name']
            let val = payload['value']
            if (!(name in state.dataSet)) return
            state.dataSet[name].push(val)
        },
        changeColor: function(state, pload) {
            let name = pload['name']
            ds = state.dataSet[name]
            if (ds == undefined) return
            let i = pload['i']
            let j = pload['j']
            let c = pload['highlight'] ? 'yellow' : 'gray'
            console.log(`  change-color(${name}): ${i},${j} = ${c}`)
            if (i != undefined && i < ds.length)
                ds[i].color = c
            if (j != undefined && j < ds.length)
                ds[j].color = c
        },
        swap: function(state, pload) {
            let name = pload['name']
            ds = state.dataSet[name]
            if (ds == undefined) return
            let i = pload['i']
            let j = pload['j']
            if (i != undefined && i >= 0 && i < ds.length && j != undefined && j >= 0 && j < ds.length) {
                console.log(`  swap(${name}): ${i},${j}`)
                let tmp = ds[i].value
                ds[i].value = ds[j].value
                ds[j].value = tmp
            }
        }
    },
    actions: {
        load: async function(context) {
            if (!context.state.ui_enabled)
                return

            context.commit('ui_state', false)
            await this.dispatch('load_s', 's1')
            await this.dispatch('load_s', 's2')

            context.commit('ui_state', true)
        },
        load_s: async function (context, name) {
            context.commit('reset', name)
            for (let i = 0; i < 10; ++i) {
                let v = parseInt(Math.random() * 200)
                //await sleep(10)
                context.commit('add', {'name': name, value: {value: v, color: 'gray'}})
            }
        },
        sort: async function(context, pload) {
                console.log(`sort: ${pload['name']}`)
                if (!context.state.ui_enabled)
                    return

                context.commit('ui_state', false)
                let name = pload['name']
                let algo = pload['algo']
                let ds = context.state.dataSet[name]
                console.log(`    name=${pload['name']} algo=${pload['algo']} ds=${ds}`)
                if (ds === undefined) return
                let n = ds.length
                for (let i = 0; i < n - 1; ++i) {
                    for (let j = i + 1; j < n; ++j) {
                        context.commit('changeColor', {name:name, i:i, j:j, highlight: true})
                        await sleep(10)
                        if (ds[i].vlaue > ds[j].value) {
                            console.log(`    == to-swap: i=${i}/${ds[i].value} j=${j}/${ds[j].value}`)
                            context.commit('swap', {name: name, i: i, j: j})
                            console.log(`    == swapped: i=${i}/${ds[i].value} j=${j}/${ds[j].value}`)
                        }
                        context.commit('changeColor', {name:name, i:i, j:j})
                    }
                }
                for (let i of ds) {
                    console.log(`    ${i.value}`)
                }
                console.log('sort done')
                context.commit('ui_state', true)
        }
    }
})

// global register component, no need to register in Vue instance
Vue.component('data-set', {
    props: ['name'],
    template: `
  <svg width="350" height="300">
    <g transform='translate(10,250) scale(1,-1)'>
        <rect v-for='(d,n) in data' :id='"r"+name+n'
            :x="n*5" :height="d.value" width="4" :fill="d.color" />
    </g>
  </svg>
  `,
    data: function() {
        return {}
    },
    methods: {

    },
    computed: {
        data: function() {
            return theStore.state.dataSet[this.name]
        }
    }
})

var app = new Vue({
  el: '#app',
  store: theStore,
  data: {
  },
  methods: {
      load: function() {
          this.$store.dispatch('load')
      },
      sort: function(name, algo) {
          if (algo == undefined) algo = 'bubble'
          this.$store.dispatch('sort', {name: name, algo: algo})
      }
  }
})

</script>


</div>
</div>

    
    
    
</body>
</html>
