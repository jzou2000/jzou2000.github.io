<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<title>
    My Hugo
</title>

<link rel="stylesheet" type="text/css" href="/css/syntax.css">
<link rel="stylesheet" type="text/css" href="/css/site.css">

  



</head>

<body>
    
 
<div class="header">
  <div class="nav-menu-bar">
    <ul class="nav-menu-bar">
    
      <li class="nav-menu">
        
          Core
          <div class="nav-menu-item">
            
              

  
  
    <a href="/core/algorithm/resources/">Algorithm</a>
  


            
              

  
  
    
      <a href="/core/c&#43;&#43;/debug/sysinternals/">C/C&#43;&#43;</a>
    
  


            
              

  
  
    
      <a href="/core/db/odbc/odbc-api-notes/">Database</a>
    
  


            
              

  
  
    <a href="/core/docker/install/">Docker</a>
  


            
              

  
  
    
      <a href="/core/git/p4/p4recipe/">Git</a>
    
  


            
              

  
  
    <a href="/core/java/load-overload/">Java</a>
  


            
              

  
  
    <a href="/core/jenkins/overview/">Jenkins</a>
  


            
              

  
  
    
      <a href="/core/linux/utils/diff/">Linux</a>
    
  


            
              

  
  
    <a href="/core/misc/vsc/">Misc</a>
  


            
              

  
  
    <a href="/core/network/mitmproxy/">Network</a>
  


            
              

  
  
    <a href="/core/open-source/apache/">Open Source</a>
  


            
              

  
  
    <a href="/core/python/shallow-or-deep/">Python</a>
  


            
              

  
  
    
      <a href="/core/rosetta/container/vector/">Rosetta</a>
    
  


            
              

  
  
    <a href="/core/security/ssh-key/">Security</a>
  


            
              

  
  
    
      <a href="/core/shell/bash/array/">Shell</a>
    
  


            
          </div>
        
      </li>
    
      <li class="nav-menu">
        
          Web
          <div class="nav-menu-item">
            
              

  
  
    <a href="/web/css/align/">CSS</a>
  


            
              

  
  
    <a href="/web/html/overview/">Html</a>
  


            
              

  
  
    <a href="/web/hugo/my-hugo-docker/">Hugo</a>
  


            
              

  
  
    <a href="/web/js/vsc-settings-javascript/">JavaScript</a>
  


            
              

  
  
    <a href="/web/misc/tools/">Misc</a>
  


            
              

  
  
    
      <a href="/web/svg/samples/embed-svg/">SVG</a>
    
  


            
              

  
  
    <a href="/web/vue/vue-quick-start/">Vue</a>
  


            
          </div>
        
      </li>
    
      <li class="nav-menu">
        
          IoT
          <div class="nav-menu-item">
            
              

  
  
    <a href="/iot/arduino/shopping/">Arduino</a>
  


            
              

  
  
    
      <a href="/iot/electronics/audio/microphone-array/">Electroincs</a>
    
  


            
              

  
  
    <a href="/iot/esp/esp32/">Esp</a>
  


            
              

  
  
    <a href="/iot/freecad/online-resources/">FreeCAD</a>
  


            
              

  
  
    <a href="/iot/general/emulator/">General</a>
  


            
          </div>
        
      </li>
    
      <li class="nav-menu">
        
          Blogs
          <div class="nav-menu-item">
            
              

  
  
    <a href="/blogs/2023/04/">2023</a>
  


            
              

  
  
    <a href="/blogs/blood-tests/results/">Blood Tests</a>
  


            
              

  
  
    <a href="/blogs/cancer/calender/">Cancer</a>
  


            
              

  
  
    
      <a href="/blogs/english/proverbs-of-day/200/">English</a>
    
  


            
              

  
  
    <a href="/blogs/recipe/begrette/">Recipe</a>
  


            
              

  
  
    <a href="/blogs/camino/sjpdp/">The French Camino</a>
  


            
              

  
  
    <a href="/blogs/travels/morocco/">Travels</a>
  


            
              

  
  
    <a href="/blogs/vancouver/bookmark/">Vancouver</a>
  


            
              

  
  
    <a href="/blogs/varicose/intro/">Varicose Veins</a>
  


            
              

  
  
    <a href="/blogs/workout/bookmarks/">Workout</a>
  


            
          </div>
        
      </li>
    
    
      <li class="nav-menu">
          Taxonomies
          
<div class="nav-menu-item">
    
    <a href='/categories'>categories</a>
    
    <a href='/tags'>tags</a>
    
</div>

      </li>
    
    </ul>
  </div>
</div>



    
<div>
  
<div class="nav-sidebar">
  
  

  
    
  
  
  <div class='nav-sidebar-title'>JavaScript</div>
  
    
      <label for="Embedded JS Engine">Embedded JS Engine</label>
      <input type="radio" name="nav-sidebar" id="Embedded JS Engine" checked>
      <div class="nav-sidebar-cascade">
        
          <a href="/web/js/embedded/overview/">overview</a>
        
          <a href="/web/js/embedded/build/">Build qjs</a>
        
      </div>
    
      <label for="Node.js">Node.js</label>
      <input type="radio" name="nav-sidebar" id="Node.js" >
      <div class="nav-sidebar-cascade">
        
          <a href="/web/js/node/express-tips/">express.js</a>
        
          <a href="/web/js/node/https-express/">https with express.js</a>
        
          <a href="/web/js/node/node-pkg/">Packing into a single binary</a>
        
          <a href="/web/js/node/fswalk/">fswalk</a>
        
      </div>
    
      <label for="Npm">Npm</label>
      <input type="radio" name="nav-sidebar" id="Npm" >
      <div class="nav-sidebar-cascade">
        
          <a href="/web/js/npm/common-modules/">common modules index</a>
        
          <a href="/web/js/npm/usage/">common usage</a>
        
          <a href="/web/js/npm/npm/">npm</a>
        
          <a href="/web/js/npm/better-sqlite3/">better-sqlite3</a>
        
          <a href="/web/js/npm/commander/">commander.js</a>
        
          <a href="/web/js/npm/express&#43;axios/">express &#43; axios</a>
        
          <a href="/web/js/npm/fast-xml-parser/">fast-xml-parser</a>
        
          <a href="/web/js/npm/iconv-lite/">iconv-lite</a>
        
          <a href="/web/js/npm/js-levenshtein/">js-levenshtein</a>
        
          <a href="/web/js/npm/js-yaml/">js-yaml</a>
        
          <a href="/web/js/npm/markdown-it&#43;highlight/">markdonw-it &#43; highlight.js</a>
        
          <a href="/web/js/npm/nedb/">nedb</a>
        
          <a href="/web/js/npm/sax/">sax</a>
        
          <a href="/web/js/npm/socket.io/">socket.io</a>
        
      </div>
    
  

  
  <div class='nav-sidebar-direct'>
  
    
      <a href="/web/js/bookmark/">bookmarks</a>
    
  
    
      <a href="/web/js/externl-dom/">external DOM elements</a>
    
  
    
      <a href="/web/js/framework/">framework</a>
    
  
    
      <a href="/web/js/vsc-settings-javascript/">play with vsc</a>
    
  
    
  
    
  
    
  
    
      <a href="/web/js/tutorials/">tutorial</a>
    
  
  </div>
  
</div>

  <div class="content">
  <h1>Build qjs</h1>
  
  <h2 id="build-with-offical-makefile-on-osx">Build with offical Makefile on OSX</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">jasonzou@Jasons-MBP quickjs % make
</span></span><span class="line"><span class="cl">mkdir -p .obj .obj/examples .obj/tests
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/quickjs.check.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/quickjs.check.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -DCONFIG_CHECK_JSVALUE -c -o .obj/quickjs.check.o quickjs.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/qjs.check.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/qjs.check.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -DCONFIG_CHECK_JSVALUE -c -o .obj/qjs.check.o qjs.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/qjs.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/qjs.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -flto -c -o .obj/qjs.o qjs.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/qjsc.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/qjsc.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -DCONFIG_CC<span class="o">=</span><span class="se">\&#34;</span>clang<span class="se">\&#34;</span> -DCONFIG_PREFIX<span class="o">=</span><span class="se">\&#34;</span>/usr/local<span class="se">\&#34;</span> -DCONFIG_LTO -O2 -flto -c -o .obj/qjsc.o qjsc.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/quickjs.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/quickjs.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -flto -c -o .obj/quickjs.o quickjs.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/libregexp.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/libregexp.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -flto -c -o .obj/libregexp.o libregexp.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/libunicode.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/libunicode.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -flto -c -o .obj/libunicode.o libunicode.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/cutils.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/cutils.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -flto -c -o .obj/cutils.o cutils.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/quickjs-libc.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/quickjs-libc.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -flto -c -o .obj/quickjs-libc.o quickjs-libc.c
</span></span><span class="line"><span class="cl">quickjs-libc.c:2407:14: warning: assigning to <span class="s1">&#39;char *&#39;</span> from <span class="s1">&#39;const char [14]&#39;</span> discards qualifiers
</span></span><span class="line"><span class="cl">      <span class="o">[</span>-Wincompatible-pointer-types-discards-qualifiers<span class="o">]</span>
</span></span><span class="line"><span class="cl">        <span class="nv">path</span> <span class="o">=</span> <span class="s2">&#34;/bin:/usr/bin&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">             ^ ~~~~~~~~~~~~~~~
</span></span><span class="line"><span class="cl">quickjs-libc.c:2452:19: error: use of undeclared identifier <span class="s1">&#39;environ&#39;</span>
</span></span><span class="line"><span class="cl">    char **envp <span class="o">=</span> environ<span class="p">;</span>
</span></span><span class="line"><span class="cl">                  ^
</span></span><span class="line"><span class="cl">quickjs-libc.c:2628:17: error: use of undeclared identifier <span class="s1">&#39;environ&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">(</span>envp !<span class="o">=</span> environ<span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                ^
</span></span><span class="line"><span class="cl"><span class="m">1</span> warning and <span class="m">2</span> errors generated.
</span></span><span class="line"><span class="cl">make: *** <span class="o">[</span>.obj/quickjs-libc.o<span class="o">]</span> Error <span class="m">1</span>
</span></span><span class="line"><span class="cl">jasonzou@Jasons-MBP quickjs % git checkout -b myplay
</span></span></code></pre></div><p>Make a branch <code>myplay</code>, edit and fix in <code>quickjs-libc.h</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">jasonzou@Jasons-MBP quickjs % git checkout -b myplay
</span></span><span class="line"><span class="cl">jasonzou@Jasons-MBP quickjs % git commit
</span></span><span class="line"><span class="cl">jasonzou@Jasons-MBP quickjs % git log -p -1
</span></span><span class="line"><span class="cl">commit 130f349d885f1266f85ded55de4e2dea20bed9e0 <span class="o">(</span>HEAD -&gt; myplay<span class="o">)</span>
</span></span><span class="line"><span class="cl">Author: Jason Zou &lt;jasonzou@Jasons-MBP.hitronhub.home&gt;
</span></span><span class="line"><span class="cl">Date:   Sat May <span class="m">16</span> 13:18:54 <span class="m">2020</span> -0700
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    fix compile error of missing extern char** environ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">diff --git a/quickjs-libc.h b/quickjs-libc.h
</span></span><span class="line"><span class="cl">index 93a53da..478c751 <span class="m">100644</span>
</span></span><span class="line"><span class="cl">--- a/quickjs-libc.h
</span></span><span class="line"><span class="cl">+++ b/quickjs-libc.h
</span></span><span class="line"><span class="cl">@@ -28,6 +28,13 @@
</span></span><span class="line"><span class="cl"> <span class="c1">#include &lt;stdlib.h&gt;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"> <span class="c1">#include &#34;quickjs.h&#34;</span>
</span></span><span class="line"><span class="cl">+#ifdef __cplusplus
</span></span><span class="line"><span class="cl">+extern <span class="s2">&#34;C&#34;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">+#endif
</span></span><span class="line"><span class="cl">+extern char** environ<span class="p">;</span>
</span></span><span class="line"><span class="cl">+#ifdef __cplusplus
</span></span><span class="line"><span class="cl">+<span class="o">}</span>
</span></span><span class="line"><span class="cl">+#endif
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"> JSModuleDef *js_init_module_std<span class="o">(</span>JSContext *ctx, const char *module_name<span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"> JSModuleDef *js_init_module_os<span class="o">(</span>JSContext *ctx, const char *module_name<span class="o">)</span><span class="p">;</span>
</span></span></code></pre></div><p>Continue to build</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">jasonzou@Jasons-MBP quickjs % make
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/qjs.check.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/qjs.check.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -DCONFIG_CHECK_JSVALUE -c -o .obj/qjs.check.o qjs.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/qjs.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/qjs.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -flto -c -o .obj/qjs.o qjs.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/qjsc.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/qjsc.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -DCONFIG_CC<span class="o">=</span><span class="se">\&#34;</span>clang<span class="se">\&#34;</span> -DCONFIG_PREFIX<span class="o">=</span><span class="se">\&#34;</span>/usr/local<span class="se">\&#34;</span> -DCONFIG_LTO -O2 -flto -c -o .obj/qjsc.o qjsc.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/quickjs-libc.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/quickjs-libc.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -flto -c -o .obj/quickjs-libc.o quickjs-libc.c
</span></span><span class="line"><span class="cl">quickjs-libc.c:2407:14: warning: assigning to <span class="s1">&#39;char *&#39;</span> from <span class="s1">&#39;const char [14]&#39;</span> discards qualifiers
</span></span><span class="line"><span class="cl">      <span class="o">[</span>-Wincompatible-pointer-types-discards-qualifiers<span class="o">]</span>
</span></span><span class="line"><span class="cl">        <span class="nv">path</span> <span class="o">=</span> <span class="s2">&#34;/bin:/usr/bin&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">             ^ ~~~~~~~~~~~~~~~
</span></span><span class="line"><span class="cl"><span class="m">1</span> warning generated.
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/libbf.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/libbf.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -flto -c -o .obj/libbf.o libbf.c
</span></span><span class="line"><span class="cl">clang -g -flto -o qjsc .obj/qjsc.o .obj/quickjs.o .obj/libregexp.o .obj/libunicode.o .obj/cutils.o .obj/quickjs-libc.o .obj/libbf.o -lm -ldl
</span></span><span class="line"><span class="cl">./qjsc -c -o repl.c -m repl.js
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/repl.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/repl.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -flto -c -o .obj/repl.o repl.c
</span></span><span class="line"><span class="cl">./qjsc -fbignum -c -o qjscalc.c qjscalc.js
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/qjscalc.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/qjscalc.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -flto -c -o .obj/qjscalc.o qjscalc.c
</span></span><span class="line"><span class="cl">clang -g -flto -rdynamic -o qjs .obj/qjs.o .obj/repl.o .obj/quickjs.o .obj/libregexp.o .obj/libunicode.o .obj/cutils.o .obj/quickjs-libc.o .obj/libbf.o .obj/qjscalc.o -lm -ldl
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/run-test262.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/run-test262.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -flto -c -o .obj/run-test262.o run-test262.c
</span></span><span class="line"><span class="cl">clang -g -flto -o run-test262 .obj/run-test262.o .obj/quickjs.o .obj/libregexp.o .obj/libunicode.o .obj/cutils.o .obj/quickjs-libc.o .obj/libbf.o -lm -ldl -lpthread
</span></span><span class="line"><span class="cl">ln -sf qjs qjscalc
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -c -o .obj/quickjs.nolto.o quickjs.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -c -o .obj/libregexp.nolto.o libregexp.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -c -o .obj/libunicode.nolto.o libunicode.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -c -o .obj/cutils.nolto.o cutils.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -c -o .obj/quickjs-libc.nolto.o quickjs-libc.c
</span></span><span class="line"><span class="cl">quickjs-libc.c:2407:14: warning: assigning to <span class="s1">&#39;char *&#39;</span> from <span class="s1">&#39;const char [14]&#39;</span> discards qualifiers
</span></span><span class="line"><span class="cl">      <span class="o">[</span>-Wincompatible-pointer-types-discards-qualifiers<span class="o">]</span>
</span></span><span class="line"><span class="cl">        <span class="nv">path</span> <span class="o">=</span> <span class="s2">&#34;/bin:/usr/bin&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">             ^ ~~~~~~~~~~~~~~~
</span></span><span class="line"><span class="cl"><span class="m">1</span> warning generated.
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -c -o .obj/libbf.nolto.o libbf.c
</span></span><span class="line"><span class="cl">ar rcs libquickjs.a .obj/quickjs.nolto.o .obj/libregexp.nolto.o .obj/libunicode.nolto.o .obj/cutils.nolto.o .obj/quickjs-libc.nolto.o .obj/libbf.nolto.o
</span></span><span class="line"><span class="cl">ar rcs libquickjs.lto.a .obj/quickjs.o .obj/libregexp.o .obj/libunicode.o .obj/cutils.o .obj/quickjs-libc.o .obj/libbf.o
</span></span><span class="line"><span class="cl">./qjsc -e -fno-string-normalize -fno-map -fno-promise -fno-typedarray -fno-typedarray -fno-regexp -fno-json -fno-eval -fno-proxy -fno-date -fno-module-loader -fno-bigint -o hello.c examples/hello.js
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/hello.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/hello.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -flto -c -o .obj/hello.o hello.c
</span></span><span class="line"><span class="cl">clang -g -flto -o examples/hello .obj/hello.o .obj/quickjs.o .obj/libregexp.o .obj/libunicode.o .obj/cutils.o .obj/quickjs-libc.o .obj/libbf.o -lm -ldl
</span></span><span class="line"><span class="cl">./qjsc -fno-string-normalize -fno-map -fno-promise -fno-typedarray -fno-typedarray -fno-regexp -fno-json -fno-eval -fno-proxy -fno-date -m -o examples/hello_module examples/hello_module.js
</span></span><span class="line"><span class="cl">./qjsc -e -M examples/fib.so,fib -m -o test_fib.c examples/test_fib.js
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/test_fib.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/test_fib.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -flto -c -o .obj/test_fib.o test_fib.c
</span></span><span class="line"><span class="cl">clang -g -Wall -MMD -MF .obj/fib.o.d -Wextra -Wno-sign-compare -Wno-missing-field-initializers -Wundef -Wuninitialized -Wunused -Wno-unused-parameter -Wwrite-strings -Wchar-subscripts -funsigned-char -MMD -MF .obj/fib.o.d -D_GNU_SOURCE -DCONFIG_VERSION<span class="o">=</span><span class="se">\&#34;</span>2020-04-12<span class="se">\&#34;</span> -DCONFIG_BIGNUM -O2 -flto -c -o .obj/examples/fib.o examples/fib.c
</span></span><span class="line"><span class="cl">clang -g -flto -o examples/test_fib .obj/test_fib.o .obj/examples/fib.o libquickjs.lto.a -lm -ldl
</span></span><span class="line"><span class="cl">jasonzou@Jasons-MBP quickjs %                                                
</span></span></code></pre></div><p>Check what are added</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">jasonzou@Jasons-MBP quickjs % git status
</span></span><span class="line"><span class="cl">On branch myplay
</span></span><span class="line"><span class="cl">Untracked files:
</span></span><span class="line"><span class="cl">  <span class="o">(</span>use <span class="s2">&#34;git add &lt;file&gt;...&#34;</span> to include in what will be committed<span class="o">)</span>
</span></span><span class="line"><span class="cl">	.obj/
</span></span><span class="line"><span class="cl">	examples/hello
</span></span><span class="line"><span class="cl">	examples/hello_module
</span></span><span class="line"><span class="cl">	examples/test_fib
</span></span><span class="line"><span class="cl">	hello.c
</span></span><span class="line"><span class="cl">	libquickjs.a
</span></span><span class="line"><span class="cl">	libquickjs.lto.a
</span></span><span class="line"><span class="cl">	qjs
</span></span><span class="line"><span class="cl">	qjsc
</span></span><span class="line"><span class="cl">	qjscalc
</span></span><span class="line"><span class="cl">	qjscalc.c
</span></span><span class="line"><span class="cl">	repl.c
</span></span><span class="line"><span class="cl">	run-test262
</span></span><span class="line"><span class="cl">	test_fib.c
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">no changes added to commit <span class="o">(</span>use <span class="s2">&#34;git add&#34;</span> and/or <span class="s2">&#34;git commit -a&#34;</span><span class="o">)</span>
</span></span></code></pre></div><h2 id="build-with-my-general-make">Build with my general make</h2>
<p>TODO</p>
<h2 id="build-on-other-posix">Build on other Posix</h2>
<h3 id="linux">Linux</h3>
<h3 id="aix">Aix</h3>
<h3 id="hpux">Hpux</h3>
<h3 id="solaris">Solaris</h3>
<h2 id="build-on-windows">Build on Windows</h2>
<p>TODO</p>


</div>
</div>

    
    
    
</body>
</html>
