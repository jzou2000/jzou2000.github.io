<!DOCTYPE html>
<html lang="en">




  <head>
    <meta charset="utf-8">
<title>My Hugo</title>
<link rel="stylesheet" type="text/css" href="/css/syntax.css">
<link rel="stylesheet" type="text/css" href="/css/site.css">
<script src="/js/nav.js"></script>

    

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>



  </head>

  <body>
    
 <div id="menu-container"></div>

 


    
  
<div class="van-content-container">
  <div id="index-container" class="van-content-index"></div>
  <div class="van-content">
    <h1>Bookmarks</h1>
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">create a hugo shortcode &#34;ybookmarks&#34;, its content is a yaml text
</span></span><span class="line"><span class="cl">that defines a list of bookmarks, e.g.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">id: div-id # bookmarks container tag id
</span></span><span class="line"><span class="cl">size: large # medium, large, huge, full, default is large
</span></span><span class="line"><span class="cl">list:
</span></span><span class="line"><span class="cl">- href: https://google.com
</span></span><span class="line"><span class="cl">  img: /images/google-logo.svg
</span></span><span class="line"><span class="cl">  title: google
</span></span><span class="line"><span class="cl">  description: google home page
</span></span><span class="line"><span class="cl">- href: /mysite/page1
</span></span><span class="line"><span class="cl">  img: page1.png
</span></span><span class="line"><span class="cl">  target: _self # default is _blank
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">The attribute href is required in a bookmark object, others are optional
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">An external javascript module will be loaded, a function
</span></span><span class="line"><span class="cl">is called to create html tags to insert a blank tag
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;div id=&#34;div-id&#34;&gt;&lt;/div&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">like this
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;div id=&#34;div-id&#34; class=&#34;van-bookmarks van-bookmarks-large&#34;&gt;
</span></span><span class="line"><span class="cl">   &lt;div class=&#34;van-bookmark&#34;&gt;
</span></span><span class="line"><span class="cl">     &lt;a href=&#34;https://google.com&#34; target=&#34;_blank&#34;&gt;
</span></span><span class="line"><span class="cl">        &lt;img src=&#34;/images/google-logo.svg&#34;&gt;
</span></span><span class="line"><span class="cl">        &lt;div class=&#34;van-bookmark-title&#34;&gt;google&lt;/div&gt;
</span></span><span class="line"><span class="cl">        &lt;div class=&#34;van-bookmark-description&#34;&gt;google home page&lt;/div&gt;
</span></span><span class="line"><span class="cl">     &lt;/a&gt;
</span></span><span class="line"><span class="cl">   &lt;/div&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   &lt;div class=&#34;van-bookmark&#34;&gt;
</span></span><span class="line"><span class="cl">     &lt;a href=&#34;/mysite/page1&#34;&gt;
</span></span><span class="line"><span class="cl">        &lt;img src=&#34;page1.png&#34;&gt;
</span></span><span class="line"><span class="cl">     &lt;/a&gt;
</span></span><span class="line"><span class="cl">   &lt;/div&gt;
</span></span><span class="line"><span class="cl">&lt;/div&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">The bookmarks and bookmark appearance and behavior are predefined by 
</span></span><span class="line"><span class="cl">external css file. for example
</span></span><span class="line"><span class="cl">van-bookmarks is a grid container
</span></span><span class="line"><span class="cl">van-bookmark defines a single bookmark that is a vertical flex
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">js should be an es2015+ module, only vanilla js is used,
</span></span><span class="line"><span class="cl">required 3rd party modules can be imported, e.g. js-yaml to parse yaml
</span></span></code></pre></div><p>grok output</p>
<pre tabindex="0"><code class="language-hugo" data-lang="hugo">{{- $id := .Get &#34;id&#34; | default (printf &#34;bookmarks-%d&#34; .Ordinal) -}}
{{- $size := .Get &#34;size&#34; | default &#34;large&#34; -}}
{{- $yaml := .Inner -}}
&lt;div id=&#34;{{ $id }}&#34; class=&#34;van-bookmarks van-bookmarks-{{ $size }}&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;module&#34;&gt;
import { renderBookmarks } from &#39;/js/bookmarks.js&#39;;

try {
  renderBookmarks(&#39;{{ $id }}&#39;, `{{ $yaml }}`);
} catch (e) {
  console.error(&#39;Error rendering bookmarks:&#39;, e);
}
&lt;/script&gt;
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">load</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/+esm&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kd">function</span> <span class="nx">createBookmarkElement</span><span class="p">(</span><span class="nx">bookmark</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">div</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;van-bookmark&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">a</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">bookmark</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">a</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">bookmark</span><span class="p">.</span><span class="nx">target</span> <span class="o">||</span> <span class="s1">&#39;_blank&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">bookmark</span><span class="p">.</span><span class="nx">img</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">img</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">img</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">bookmark</span><span class="p">.</span><span class="nx">img</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">a</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">img</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">bookmark</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">title</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">title</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;van-bookmark-title&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">title</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">bookmark</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">a</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">bookmark</span><span class="p">.</span><span class="nx">description</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">desc</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">desc</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;van-bookmark-description&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">desc</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">bookmark</span><span class="p">.</span><span class="nx">description</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">a</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">desc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="nx">div</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">div</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kd">function</span> <span class="nx">renderBookmarks</span><span class="p">(</span><span class="nx">containerId</span><span class="p">,</span> <span class="nx">yamlContent</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">container</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">containerId</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">container</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="sb">`Container with ID </span><span class="si">${</span><span class="nx">containerId</span><span class="si">}</span><span class="sb"> not found`</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">load</span><span class="p">(</span><span class="nx">yamlContent</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">list</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="p">.</span><span class="nx">list</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">bookmark</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">bookmark</span><span class="p">.</span><span class="nx">href</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">container</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">createBookmarkElement</span><span class="p">(</span><span class="nx">bookmark</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div>
  </div>
</div>



    
    
    

    
    <script src="/js/navigation-module.js"></script>
    
  </body>

</html>
