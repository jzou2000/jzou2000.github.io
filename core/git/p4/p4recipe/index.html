<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>My Hugo</title>
    <link rel="stylesheet" type="text/css" href="/css/syntax.css">
    <link rel="stylesheet" type="text/css" href="/css/site.css">
    <script src="/js/nav.js"></script>

    

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>



  </head>

<head>
  <meta charset="utf-8">
    <title>My Hugo</title>
    <link rel="stylesheet" type="text/css" href="/css/syntax.css">
    <link rel="stylesheet" type="text/css" href="/css/site.css">
    <script src="/js/nav.js"></script>

  

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>



</head>

<body>
    
 <div id="menu-container"></div>

 


    
  
<div class="van-content-container">
  <div id="index-container" class="van-content-index"></div>
  <div class="van-content">
    <h1>Some P4 Recipes</h1>
    <h2 id="list-files-that-are-changed-between-repo-and-workspace">List files that are changed between repo and workspace</h2>
<p>The standard perforce workflow is to checkout files (in a checklist,
and p4 makes them writable), modify them, and commit the changelist.
However, sometimes files are changed without notifying perforce,
such as edit and save by force. <code>p4 diff</code> usually compares only
checked-out files, but <code>-f</code> forces to compare all files.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">p4 diff -f //path/...
</span></span></code></pre></div><p>Other useful options are</p>
<table>
<thead>
<tr>
<th>Options</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-Od</td>
<td>list only files that are changed</td>
</tr>
<tr>
<td>-f</td>
<td>diff every file, opened and unopened</td>
</tr>
<tr>
<td></td>
<td><strong>display option</strong></td>
</tr>
<tr>
<td>-ds</td>
<td>summary, i.e. list file name only</td>
</tr>
<tr>
<td><strong>-du</strong></td>
<td><strong>unified result (i.e. patch file)</strong></td>
</tr>
<tr>
<td>-db</td>
<td>ignore whites changes</td>
</tr>
<tr>
<td>-dw</td>
<td>ignore whites</td>
</tr>
<tr>
<td>-dl</td>
<td>ignore line-ending</td>
</tr>
<tr>
<td></td>
<td><strong>select filter</strong> (can&rsquo;t mix them)</td>
</tr>
<tr>
<td>-sa</td>
<td>opened: changed or deleted</td>
</tr>
<tr>
<td>-sb</td>
<td>opened: changed for integrate, resolved</td>
</tr>
<tr>
<td>-sr</td>
<td>opened: unchanged</td>
</tr>
<tr>
<td>-sd</td>
<td>unopened: deleted</td>
</tr>
<tr>
<td>-se</td>
<td>unopened: changed</td>
</tr>
<tr>
<td>-sl</td>
<td>unopened: every unopened files, with status of: same, diff, missing</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">jzou@debian9:~/wks/stk$ p4 diff -f //stk/Trunk/extra/odemo/...
</span></span><span class="line"><span class="cl"><span class="o">====</span> //stk/Trunk/extra/odemo/Makefile#4 - /home/jzou/wks/stk/extra/odemo/Makefile <span class="o">====</span>
</span></span><span class="line"><span class="cl"><span class="o">====</span> //stk/Trunk/extra/odemo/odemo.cpp#2 - /home/jzou/wks/stk/extra/odemo/odemo.cpp <span class="o">====</span>
</span></span><span class="line"><span class="cl">86a87
</span></span><span class="line"><span class="cl">&gt;         <span class="nv">isIODBC</span> <span class="o">=</span> UStr::GetDefaultCodeUnitSize<span class="o">()</span> <span class="o">==</span> 4<span class="p">;</span>
</span></span><span class="line"><span class="cl">jzou@debian9:~/wks/stk$ 
</span></span><span class="line"><span class="cl">jzou@debian9:~/wks/stk$ p4 diff -f -Od //stk/Trunk/extra/odemo/...
</span></span><span class="line"><span class="cl"><span class="o">====</span> //stk/Trunk/extra/odemo/odemo.cpp#2 - /home/jzou/wks/stk/extra/odemo/odemo.cpp <span class="o">====</span>
</span></span><span class="line"><span class="cl">86a87
</span></span><span class="line"><span class="cl">&gt;         <span class="nv">isIODBC</span> <span class="o">=</span> UStr::GetDefaultCodeUnitSize<span class="o">()</span> <span class="o">==</span> 4<span class="p">;</span>
</span></span><span class="line"><span class="cl">jzou@debian9:~/wks/stk$ 
</span></span><span class="line"><span class="cl">jzou@debian9:~/wks/stk$ 
</span></span><span class="line"><span class="cl">jzou@debian9:~/wks/stk$ p4 diff -f -sa //stk/Trunk/extra/odemo/...
</span></span><span class="line"><span class="cl">/home/jzou/wks/stk/extra/odemo/odemo.cpp
</span></span><span class="line"><span class="cl">jzou@debian9:~/wks/stk$ 
</span></span></code></pre></div><h2 id="checkout-files-into-a-changelist-for-editing">Checkout files into a changelist for editing</h2>
<p>To checkout files, use <code>p4 edit</code> command</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">p4 edit -c <span class="m">1234</span> //*/path/to/file
</span></span></code></pre></div><h2 id="list-changelists">List changelists</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">p4 changes <span class="o">[</span>opts<span class="o">]</span> <span class="o">[</span>path<span class="o">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    -s status         pending, shelved, submitted
</span></span><span class="line"><span class="cl">    -c client
</span></span><span class="line"><span class="cl">    -u user
</span></span><span class="line"><span class="cl">    -e cl#            changelist above <span class="o">(</span>include<span class="o">)</span> cl#
</span></span></code></pre></div><h2 id="list-files-of-a-label">List files of a label</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">p4 file //*/prj/*/path/...@label
</span></span></code></pre></div><p>Note</p>
<ul>
<li>for efficiency, <code>//*/path/...</code> does not work</li>
</ul>

  </div>
</div>



    
    
    

    
    <script src="/js/menu-module.js"></script>
    <script src="/js/index-module.js"></script>
</body>
</html>
