<!DOCTYPE html>
<html lang="en">




  <head>
    <meta charset="utf-8">
<title>My Hugo</title>
<link rel="stylesheet" type="text/css" href="/css/syntax.css">
<link rel="stylesheet" type="text/css" href="/css/site.css">
<script src="/js/nav.js"></script>

    

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>



  </head>

  <body>
    
 <div id="menu-container"></div>

 


    
  
<div class="van-content-container">
  <div id="index-container" class="van-content-index"></div>
  <div class="van-content">
    <h1>Setup Git Upstream</h1>
    <h1 id="create-an-upstream-repo">Create An Upstream Repo</h1>
<p>There are two types of repositories:</p>
<ul>
<li>bare: repositories do not have a working copy and you can push to them, for example, repositories that you get in github. Bare repositories work as upstreams.</li>
<li>non-bare: repositories that you are working on, with a working copy. Repositories that you clone or init are non-bare by default. You can&rsquo;t (by default) and shouldn&rsquo;t push to non-bare repos.</li>
</ul>
<p>Note: technically, you can push to a non-bare repo (see below), but that is not a common practice.</p>
<p>You can create a repo as a bare repo, or convert a non-bare repo to bare.</p>
<h2 id="create-a-bare-repo">Create A Bare Repo</h2>
<p>Initialize a bare repo</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git init --bare
</span></span></code></pre></div><p>Clone a repo as a bare repo, which does not have a default remote <em>origin</em> repo.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git clone --bare
</span></span></code></pre></div><h2 id="convert-a-non-bare-repo-to-bare-repo">Convert A Non-bare Repo To Bare Repo</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># delete any working copies if applicable</span>
</span></span><span class="line"><span class="cl"><span class="c1"># e.g. rm -rf *</span>
</span></span><span class="line"><span class="cl"><span class="c1"># and leave .git/ only</span>
</span></span><span class="line"><span class="cl">git config --bool core.bare <span class="nb">true</span>
</span></span></code></pre></div><h1 id="start-by-setting-up-upstream-repo">Start by Setting-up Upstream Repo</h1>
<p>The common practice for a formal project is to initialize a upstream repo firstly.
Everyone (even you might be the only one) then clones it and pulls/pushes to it.</p>
<h1 id="setup-an-upstream-repo-from-an-existing-working-reop">Setup An Upstream Repo From An Existing Working Reop</h1>
<p>In the real world, you probably often start a project locally by initializing a repo locally. After a bunch of commits, you decide to make it public. Now you need to setup an upstream repo from your existing working repo.</p>
<h2 id="clone-as-bare">Clone As Bare</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git clone my-working-repo-url my-upstream-repo-name --bare
</span></span></code></pre></div><h2 id="push-to-an-upstream">Push To An Upstream</h2>
<p>In case you own your upstream repo facility</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git init --bare
</span></span></code></pre></div><p>Or you create a new repo from github.</p>
<p>Then set the new repo as the upstream repo of the working repo, and push to it.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git remote add my-upstream-name my-upstream-url
</span></span><span class="line"><span class="cl">git push --set-upstream my-upstream-name master
</span></span></code></pre></div>
  </div>
</div>



    
    
    

    
    <script src="/js/navigation-module.js"></script>
    
  </body>

</html>
