<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>My Hugo</title>
    <link rel="stylesheet" type="text/css" href="/css/syntax.css">
    <link rel="stylesheet" type="text/css" href="/css/site.css">
    <script src="/js/nav.js"></script>

    

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>



  </head>

<head>
  <meta charset="utf-8">
    <title>My Hugo</title>
    <link rel="stylesheet" type="text/css" href="/css/syntax.css">
    <link rel="stylesheet" type="text/css" href="/css/site.css">
    <script src="/js/nav.js"></script>

  

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>



</head>

<body>
    
 <div id="menu-container"></div>

 


    
  
<div class="van-content-container">
  <div id="index-container" class="van-content-index"></div>
  <div class="van-content">
    <h1>Generating SSH Keys and Copy Public Keys</h1>
    <h2 id="hostuser-alias">Host/user alias</h2>
<p>Edit $HOME/.ssh/config</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat <span class="nv">$HOME</span>/.ssh/config
</span></span><span class="line"><span class="cl">host my_alias  <span class="c1"># this is the alias name</span>
</span></span><span class="line"><span class="cl">    hostname some.host.remote  <span class="c1"># real host name</span>
</span></span><span class="line"><span class="cl">    user john <span class="c1"># optional, otherwise use john@my_alias</span>
</span></span></code></pre></div><h2 id="create-ssh-key">Create ssh-key</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">ssh-keygen
</span></span></code></pre></div><p>ssh-keygen generates a pair of RSA key (private id_rsa and public id_rsa.pub) at $HOME/.ssh</p>
<h2 id="copy-the-public-key-file-to-remote-host-johnhostremote">Copy the public key file to remote host (<a href="mailto:john@host.remote">john@host.remote</a>)</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">ssh-copy-id -i ~/.ssh/id_rsa.pub john@host.remote
</span></span></code></pre></div><p>The command add an entry in ~/.ssh/authorized_keys on the remote host. After the public key is added, you can ssh login without password.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">ssh john@host.remote
</span></span></code></pre></div><h2 id="remove-a-host-from-known_hosts">Remove a host from known_hosts</h2>
<p>If a host identification is changed (in public networks, it is a warning of man-in-the-middle) in a trusted/internal network because</p>
<ul>
<li>a virtual machine is rebuilt</li>
<li>the host is upgraded</li>
<li>the host is re-configured</li>
</ul>
<p>ssh refuses to connect with follow message</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">jzou@debian9:~$ ssh b2so86
</span></span><span class="line"><span class="cl">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
</span></span><span class="line"><span class="cl">@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
</span></span><span class="line"><span class="cl">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
</span></span><span class="line"><span class="cl">IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
</span></span><span class="line"><span class="cl">Someone could be eavesdropping on you right now <span class="o">(</span>man-in-the-middle attack<span class="o">)</span>!
</span></span><span class="line"><span class="cl">It is also possible that a host key has just been changed.
</span></span><span class="line"><span class="cl">The fingerprint <span class="k">for</span> the RSA key sent by the remote host is
</span></span><span class="line"><span class="cl">SHA256:jmt8vSqOWaC6/tuhlsTl4CYq9U2x7j2VymMbKxLbKRE.
</span></span><span class="line"><span class="cl">Please contact your system administrator.
</span></span><span class="line"><span class="cl">Add correct host key in /home/jzou/.ssh/known_hosts to get rid of this message.
</span></span><span class="line"><span class="cl">Offending RSA key in /home/jzou/.ssh/known_hosts:3
</span></span><span class="line"><span class="cl">  remove with:
</span></span><span class="line"><span class="cl">  ssh-keygen -f <span class="s2">&#34;/home/jzou/.ssh/known_hosts&#34;</span> -R 192.168.223.101
</span></span><span class="line"><span class="cl">RSA host key <span class="k">for</span> 192.168.223.101 has changed and you have requested strict checking.
</span></span><span class="line"><span class="cl">Host key verification failed.
</span></span></code></pre></div><p>To remove the specified host from the file <code>~/.ssh/known_hosts</code>, you can either delete the line 3 (according to above message known_hosts:3),
or even better use the suggested command</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">jzou@debian9:~$ ssh-keygen -R 192.168.223.101
</span></span><span class="line"><span class="cl"><span class="c1"># Host 192.168.223.101 found: line 3</span>
</span></span><span class="line"><span class="cl">/mnt/huge/jzou/.ssh/known_hosts updated.
</span></span><span class="line"><span class="cl">Original contents retained as /home/jzou/.ssh/known_hosts.old
</span></span></code></pre></div><p>Both IP address or host name are accepted, depends on how it is configured
in the file <code>~/.ssh/config</code></p>

  </div>
</div>



    
    
    

    
    <script src="/js/menu-module.js"></script>
    <script src="/js/index-module.js"></script>
</body>
</html>
