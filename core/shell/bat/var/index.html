<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>My Hugo</title>
    <link rel="stylesheet" type="text/css" href="/css/syntax.css">
    <link rel="stylesheet" type="text/css" href="/css/site.css">
    <script src="/js/nav.js"></script>

    

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>



  </head>

<head>
  <meta charset="utf-8">
    <title>My Hugo</title>
    <link rel="stylesheet" type="text/css" href="/css/syntax.css">
    <link rel="stylesheet" type="text/css" href="/css/site.css">
    <script src="/js/nav.js"></script>

  

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>



</head>

<body>
    
 <div id="menu-container"></div>

 


    
  
<div class="van-content-container">
  <div id="index-container" class="van-content-index"></div>
  <div class="van-content">
    <h1>Variables and String</h1>
    <h2 id="define-and-reference">Define and Reference</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl"><span class="k">set</span> <span class="nv">mystr</span><span class="p">=</span>hello, world
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nv">%mystr%</span>
</span></span></code></pre></div><ul>
<li>Don&rsquo;t put spaces between variable and equal sign <code>=</code></li>
<li>unlike <strong><code>bash</code></strong>, anything after <code>=</code> is the value of the variable</li>
<li>reference the variable by putting <code>%</code> at both ends of the variable (<code>bash</code> syntax <code>${var}</code>)</li>
<li>special cases
<ul>
<li>command-line arguments: <code>%* %0 %1 %2 ...</code></li>
<li>loop iterator variable: <code>%%x</code></li>
</ul>
</li>
</ul>
<h2 id="examples">Examples</h2>
<p>str.bat</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl"><span class="p">@</span><span class="k">echo</span> off
</span></span><span class="line"><span class="cl"><span class="k">set</span> <span class="nv">mystr</span><span class="p">=</span>hello, world
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nv">%mystr%</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">:</span><span class="c1">: string left</span>
</span></span><span class="line"><span class="cl"><span class="k">set</span> <span class="nv">newstr</span><span class="p">=</span>left 5 (<span class="nv">%mystr:~0,5%</span>)
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nv">%newstr%</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">:</span><span class="c1">: string right</span>
</span></span><span class="line"><span class="cl"><span class="k">set</span> <span class="nv">newstr</span><span class="p">=</span>right 7 (<span class="nv">%mystr:~-7%</span>)
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nv">%newstr%</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">:</span><span class="c1">: string replace</span>
</span></span><span class="line"><span class="cl"><span class="k">set</span> <span class="nv">newstr</span><span class="p">=</span>replace <span class="nv">%mystr:l=L%</span>
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nv">%newstr%</span>
</span></span></code></pre></div><p>The result</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">C<span class="p">:</span><span class="nl">\tmp\bat.ex</span><span class="c1">&gt;str.bat</span>
</span></span><span class="line"><span class="cl">hello, world
</span></span><span class="line"><span class="cl">left 5 (hello)
</span></span><span class="line"><span class="cl">right 7 (, world)
</span></span><span class="line"><span class="cl">replace heLLo, worLd
</span></span></code></pre></div><h2 id="special-cases">Special Cases</h2>
<h3 id="set-p"><code>set p</code></h3>
<p>display all variables that begin with the letter <code>p</code></p>
<h3 id="set-a"><code>set /a</code></h3>
<p>set value in numeric</p>
<h3 id="set-p-varprompt-string"><code>set /p var=[prompt-string]</code></h3>
<p>display prompt-string and accept user input as value of variable.</p>
<h3 id="varoldnew"><code>%var:old=new%</code></h3>
<p>substitute all <code>old</code> substring to <code>new</code> in varialbe <code>var</code></p>
<h3 id="var105"><code>%var:~10,5%</code></h3>
<p>return substring of <code>var</code> from 11th with length 5.</p>
<h3 id="local-delayed-expansion">local delayed expansion</h3>
<p>Allow to reload variable during execution, useful to iterate arrays.</p>
<ul>
<li>set <code>EnableDelayedExpansion</code></li>
<li>Quote array and variables by <code>!</code> in a <code>for</code> loop</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl"><span class="p">@</span><span class="k">echo</span> off
</span></span><span class="line"><span class="cl"><span class="p">@</span><span class="k">setlocal</span> EnableDelayedExpansion
</span></span><span class="line"><span class="cl"><span class="k">set</span> <span class="nv">array[1]</span><span class="p">=</span>hello
</span></span><span class="line"><span class="cl"><span class="k">set</span> <span class="nv">array[2]</span><span class="p">=</span>world
</span></span><span class="line"><span class="cl"><span class="k">set</span> <span class="nv">len</span><span class="p">=</span>2
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="k">/l</span> <span class="se">%%</span>i <span class="k">in</span> <span class="p">(</span><span class="mi">1</span>,<span class="mi">1</span>,<span class="nv">%len%</span><span class="p">)</span> <span class="k">do</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="k">set</span> <span class="nv">n</span><span class="p">=</span><span class="nv">!array[%%i]!</span>
</span></span><span class="line"><span class="cl">  <span class="k">echo</span> i=<span class="se">%%</span>i n=<span class="nv">!n!</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div>
  </div>
</div>



    
    
    

    
    <script src="/js/menu-module.js"></script>
    <script src="/js/index-module.js"></script>
</body>
</html>
