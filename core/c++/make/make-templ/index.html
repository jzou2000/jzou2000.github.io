<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<title>
    My Hugo
</title>

<link rel="stylesheet" type="text/css" href="/css/syntax.css">
<link rel="stylesheet" type="text/css" href="/css/site.css">

  



</head>

<body>
    
 
<div class="header">
  <div class="nav-menu-bar">
    <ul class="nav-menu-bar">
    
      <li class="nav-menu">
        
          Core
          <div class="nav-menu-item">
            
              

  
  
    <a href="/core/algorithm/resources/">Algorithm</a>
  


            
              

  
  
    
      <a href="/core/c&#43;&#43;/debug/sysinternals/">C/C&#43;&#43;</a>
    
  


            
              

  
  
    
      <a href="/core/db/odbc/odbc-api-notes/">Database</a>
    
  


            
              

  
  
    <a href="/core/docker/install/">Docker</a>
  


            
              

  
  
    
      <a href="/core/git/p4/p4recipe/">Git</a>
    
  


            
              

  
  
    <a href="/core/java/load-overload/">Java</a>
  


            
              

  
  
    <a href="/core/jenkins/overview/">Jenkins</a>
  


            
              

  
  
    
      <a href="/core/linux/utils/diff/">Linux</a>
    
  


            
              

  
  
    <a href="/core/misc/vsc/">Misc</a>
  


            
              

  
  
    <a href="/core/network/mitmproxy/">Network</a>
  


            
              

  
  
    <a href="/core/open-source/apache/">Open Source</a>
  


            
              

  
  
    <a href="/core/python/shallow-or-deep/">Python</a>
  


            
              

  
  
    
      <a href="/core/rosetta/container/vector/">Rosetta</a>
    
  


            
              

  
  
    <a href="/core/security/ssh-key/">Security</a>
  


            
              

  
  
    
      <a href="/core/shell/bash/array/">Shell</a>
    
  


            
          </div>
        
      </li>
    
      <li class="nav-menu">
        
          Web
          <div class="nav-menu-item">
            
              

  
  
    <a href="/web/css/align/">CSS</a>
  


            
              

  
  
    <a href="/web/html/overview/">Html</a>
  


            
              

  
  
    <a href="/web/hugo/my-hugo-docker/">Hugo</a>
  


            
              

  
  
    <a href="/web/js/vsc-settings-javascript/">JavaScript</a>
  


            
              

  
  
    <a href="/web/misc/tools/">Misc</a>
  


            
              

  
  
    
      <a href="/web/svg/samples/embed-svg/">SVG</a>
    
  


            
              

  
  
    <a href="/web/vue/vue-quick-start/">Vue</a>
  


            
          </div>
        
      </li>
    
      <li class="nav-menu">
        
          IoT
          <div class="nav-menu-item">
            
              

  
  
    <a href="/iot/arduino/shopping/">Arduino</a>
  


            
              

  
  
    
      <a href="/iot/electronics/audio/microphone-array/">Electroincs</a>
    
  


            
              

  
  
    <a href="/iot/esp/esp32/">Esp</a>
  


            
              

  
  
    <a href="/iot/freecad/online-resources/">FreeCAD</a>
  


            
              

  
  
    <a href="/iot/general/emulator/">General</a>
  


            
          </div>
        
      </li>
    
      <li class="nav-menu">
        
          Blogs
          <div class="nav-menu-item">
            
              

  
  
    <a href="/blogs/2023/04/">2023</a>
  


            
              

  
  
    <a href="/blogs/blood-tests/results/">Blood Tests</a>
  


            
              

  
  
    <a href="/blogs/cancer/calender/">Cancer</a>
  


            
              

  
  
    
      <a href="/blogs/english/proverbs-of-day/200/">English</a>
    
  


            
              

  
  
    <a href="/blogs/recipe/begrette/">Recipe</a>
  


            
              

  
  
    <a href="/blogs/camino/sjpdp/">The French Camino</a>
  


            
              

  
  
    <a href="/blogs/travels/morocco/">Travels</a>
  


            
              

  
  
    <a href="/blogs/vancouver/bookmark/">Vancouver</a>
  


            
              

  
  
    <a href="/blogs/varicose/intro/">Varicose Veins</a>
  


            
              

  
  
    <a href="/blogs/workout/bookmarks/">Workout</a>
  


            
          </div>
        
      </li>
    
    
      <li class="nav-menu">
          Taxonomies
          
<div class="nav-menu-item">
    
    <a href='/categories'>categories</a>
    
    <a href='/tags'>tags</a>
    
</div>

      </li>
    
    </ul>
  </div>
</div>



    
<div>
  
<div class="nav-sidebar">
  
  

  
    
  
  
  <div class='nav-sidebar-title'>C/C&#43;&#43;</div>
  
    
      <label for="Debug">Debug</label>
      <input type="radio" name="nav-sidebar" id="Debug" >
      <div class="nav-sidebar-cascade">
        
          <a href="/core/c&#43;&#43;/debug/dbx-aix/">dbx</a>
        
          <a href="/core/c&#43;&#43;/debug/debugger/">debugger</a>
        
          <a href="/core/c&#43;&#43;/debug/drmemory/">dr.memory</a>
        
          <a href="/core/c&#43;&#43;/debug/gdb-recipe/">gdb recipes</a>
        
          <a href="/core/c&#43;&#43;/debug/shared-object-debug/">shared object</a>
        
          <a href="/core/c&#43;&#43;/debug/sysinternals/">sysinternals</a>
        
          <a href="/core/c&#43;&#43;/debug/trace/">trace</a>
        
          <a href="/core/c&#43;&#43;/debug/osx-debug/">Debugging on OSX</a>
        
      </div>
    
      <label for="Language">Language</label>
      <input type="radio" name="nav-sidebar" id="Language" >
      <div class="nav-sidebar-cascade">
        
          <a href="/core/c&#43;&#43;/lang/pitfall-template/">pitfall - template</a>
        
          <a href="/core/c&#43;&#43;/lang/template-instatiation/">template instantiation</a>
        
          <a href="/core/c&#43;&#43;/lang/template-variadic/">template variadic</a>
        
          <a href="/core/c&#43;&#43;/lang/version-cheatsheet/">version cheatsheet</a>
        
      </div>
    
      <label for="Make">Make</label>
      <input type="radio" name="nav-sidebar" id="Make" checked>
      <div class="nav-sidebar-cascade">
        
          <a href="/core/c&#43;&#43;/make/build-m32/">build 32-bit apps</a>
        
          <a href="/core/c&#43;&#43;/make/cpp_pkg_mgr/">c&#43;&#43; pkg mgr</a>
        
          <a href="/core/c&#43;&#43;/make/gmake-recipes/">gmake recipes</a>
        
          <a href="/core/c&#43;&#43;/make/gn/">gn</a>
        
          <a href="/core/c&#43;&#43;/make/aix-static-lib/">link C&#43;&#43; archieves on AIX</a>
        
          <a href="/core/c&#43;&#43;/make/mac-universal/">mac univeral bins</a>
        
          <a href="/core/c&#43;&#43;/make/make-templ/">make template</a>
        
          <a href="/core/c&#43;&#43;/make/playing-with-gmake/">playground</a>
        
          <a href="/core/c&#43;&#43;/make/libs-across-platforms/">static/shared libs</a>
        
          <a href="/core/c&#43;&#43;/make/soname/">Shared Object and soname</a>
        
          <a href="/core/c&#43;&#43;/make/whole-archive/">link whole archive statically</a>
        
      </div>
    
      <label for="Misc">Misc</label>
      <input type="radio" name="nav-sidebar" id="Misc" >
      <div class="nav-sidebar-cascade">
        
          <a href="/core/c&#43;&#43;/misc/__cplusplus/">__cplusplus</a>
        
          <a href="/core/c&#43;&#43;/misc/clang/">clang&#43;&#43; issues</a>
        
          <a href="/core/c&#43;&#43;/misc/manuals/">compiler manuals</a>
        
          <a href="/core/c&#43;&#43;/misc/compiler-predefinded-macro/">compiler predefined macros</a>
        
          <a href="/core/c&#43;&#43;/misc/epsilon/">epsilon</a>
        
          <a href="/core/c&#43;&#43;/misc/identify-compiler/">identify compiler</a>
        
          <a href="/core/c&#43;&#43;/misc/nm/">inspect module symbols</a>
        
          <a href="/core/c&#43;&#43;/misc/c&#43;&#43;-demangling/">name demangling</a>
        
          <a href="/core/c&#43;&#43;/misc/picojson/">picojson</a>
        
          <a href="/core/c&#43;&#43;/misc/readelf/">readelf</a>
        
      </div>
    
      <label for="Patterns">Patterns</label>
      <input type="radio" name="nav-sidebar" id="Patterns" >
      <div class="nav-sidebar-cascade">
        
          <a href="/core/c&#43;&#43;/patterns/big-five/">big-five-rule</a>
        
          <a href="/core/c&#43;&#43;/patterns/crtp/">crtp</a>
        
          <a href="/core/c&#43;&#43;/patterns/pimpl/">pimpl</a>
        
          <a href="/core/c&#43;&#43;/patterns/trait/">trait</a>
        
      </div>
    
      <label for="Pitfalls">Pitfalls</label>
      <input type="radio" name="nav-sidebar" id="Pitfalls" >
      <div class="nav-sidebar-cascade">
        
          <a href="/core/c&#43;&#43;/pitfalls/big5/">big 5</a>
        
          <a href="/core/c&#43;&#43;/pitfalls/overload-implicit/">implicit type convertion</a>
        
      </div>
    
      <label for="Profile and Optimization">Profile and Optimization</label>
      <input type="radio" name="nav-sidebar" id="Profile and Optimization" >
      <div class="nav-sidebar-cascade">
        
          <a href="/core/c&#43;&#43;/performance/gprof/">gprof</a>
        
          <a href="/core/c&#43;&#43;/performance/perf/">perf</a>
        
          <a href="/core/c&#43;&#43;/performance/valgrind/">valgrind</a>
        
      </div>
    
      <label for="STL Case Studies">STL Case Studies</label>
      <input type="radio" name="nav-sidebar" id="STL Case Studies" >
      <div class="nav-sidebar-cascade">
        
          <a href="/core/c&#43;&#43;/stl/stl-iterator/">STL - Iterator</a>
        
      </div>
    
  

  
  <div class='nav-sidebar-direct'>
  
    
      <a href="/core/c&#43;&#43;/plugin-framework/">A Plugin Framework</a>
    
  
    
      <a href="/core/c&#43;&#43;/gcc-std/">c&#43;&#43; std in gcc</a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/core/c&#43;&#43;/casting/">casting</a>
    
  
    
  
  </div>
  
</div>

  <div class="content">
  <h1>A Makefile Template</h1>
  
  <h2 id="module-variables">Module Variables</h2>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Required</th>
<th>Default</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>NAME</td>
<td>yes</td>
<td></td>
<td>mymod</td>
<td>name of module, target name is generated from the module name</td>
</tr>
<tr>
<td>BINNAME</td>
<td></td>
<td></td>
<td></td>
<td>override the convention of target name, see below notes</td>
</tr>
<tr>
<td>TYPE</td>
<td>yes</td>
<td></td>
<td>lib</td>
<td>bin, lib, so, (none)</td>
</tr>
<tr>
<td>SRCS</td>
<td></td>
<td>.</td>
<td></td>
<td>directories that contain source code</td>
</tr>
<tr>
<td>SUBS</td>
<td></td>
<td></td>
<td></td>
<td>list of sub modules</td>
</tr>
<tr>
<td>DEPENDS</td>
<td></td>
<td></td>
<td></td>
<td>list of depends</td>
</tr>
<tr>
<td>DEFS</td>
<td></td>
<td></td>
<td>-Djs</td>
<td>compiler defines</td>
</tr>
<tr>
<td>LDEF</td>
<td></td>
<td></td>
<td>-Dpic</td>
<td>linker defines</td>
</tr>
<tr>
<td>INCS</td>
<td></td>
<td></td>
<td>a/inc b/c</td>
<td>list of include paths, without -I leading</td>
</tr>
<tr>
<td>LIBS</td>
<td></td>
<td></td>
<td>-labc</td>
<td>list of libs with -l, include -L if needed</td>
</tr>
<tr>
<td>OBJS</td>
<td></td>
<td></td>
<td>a.o v</td>
<td>list of extra objects. If an item v is not ended with .o, expand to v/*.o</td>
</tr>
<tr>
<td>ROOT</td>
<td></td>
<td></td>
<td></td>
<td>read-only, set by the template to path to the toplevel makefile</td>
</tr>
<tr>
<td>MKDEP_FLAGS</td>
<td></td>
<td>-MM</td>
<td></td>
<td>compliler flags that generate depend file (.d) from source (.c,cxx)</td>
</tr>
<tr>
<td>INSTALL_INC</td>
<td></td>
<td></td>
<td>1</td>
<td>install include/ (override by INSTALL_INC_DIR)</td>
</tr>
<tr>
<td>INSTALL_LIB</td>
<td></td>
<td></td>
<td>1</td>
<td>install lib/ (override by INSTALL_LIB_DIR)</td>
</tr>
<tr>
<td>INSTALL_BIN</td>
<td></td>
<td></td>
<td>1</td>
<td>install bin/ (override by INSTALL_BIN_DIR)</td>
</tr>
<tr>
<td>INSTALL_DAT</td>
<td></td>
<td></td>
<td>1</td>
<td>install etc/ (override by INSTALL_DAT_DIR)</td>
</tr>
</tbody>
</table>
<p>Note</p>
<ul>
<li>SRCS automatically exclude include/, folders starting with . or _ or tmp.</li>
<li>By default convention, the target name is set according to the module type
<ul>
<li>so - lib$(NAME).so</li>
<li>lib - lib$(NAME).a</li>
<li>bin - $(NAME)</li>
</ul>
</li>
<li>OBJ_EXTRA: extra .o files that are linked into the target. Some secenario are:
<ul>
<li>part of .o files from external depends</li>
<li>subs/depends are not libs/shared-objects</li>
<li>.o files are linked into the target even they are not explicitly referenced (e.g. referenced by static constructors)</li>
</ul>
</li>
<li>variables prefix:
<ul>
<li>OS_ OS level variables</li>
<li>EXT_ external resources</li>
<li>PRJ_ project level</li>
</ul>
</li>
</ul>
<h2 id="defined-functions">Defined Functions</h2>
<table>
<thead>
<tr>
<th>Function</th>
<th>Syntax</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>_join</td>
<td>call _join, list,sep</td>
<td>join list by sep (default=:)</td>
</tr>
<tr>
<td>_relpath</td>
<td>call _replpath,list,base</td>
<td>return a list of base-relative path, base=ROOT</td>
</tr>
<tr>
<td>_pathname</td>
<td>call _pathname,list</td>
<td>strip tailing / for each in list if applicable</td>
</tr>
<tr>
<td>_eq</td>
<td>call _eq,v1,v2</td>
<td>if v1 eques v2</td>
</tr>
<tr>
<td>_mkinc</td>
<td>call _mkinc,list,base</td>
<td>prepend base/ to list unless it is abspath, base=mod.root</td>
</tr>
<tr>
<td>_exclude</td>
<td>call _exclude,src,pattern</td>
<td>exclude pattern from src, both are lists</td>
</tr>
<tr>
<td>_unique</td>
<td>call _unique,list</td>
<td>remove duplicated words in the list, without order change</td>
</tr>
<tr>
<td>_print</td>
<td>call _print,val,title</td>
<td>print val if not empty, title=</td>
</tr>
<tr>
<td>_vprint</td>
<td>call _vprint,val,title</td>
<td>the same with _print, if VERBOSE</td>
</tr>
<tr>
<td>_println</td>
<td>call _println,list,title</td>
<td>print list, one line by each word</td>
</tr>
<tr>
<td>_vprintln</td>
<td>call _vprintln,list,title</td>
<td>the same with _println, if VERBOSE</td>
</tr>
<tr>
<td>_olist</td>
<td>call _olist,list</td>
<td>list .o files, expand to $v/*.o if $v is not ended by .o</td>
</tr>
<tr>
<td>_merge</td>
<td>call _merge,name,dfl</td>
<td>merge and unique: merge name with prefix OS_,EXT_,PRJ_</td>
</tr>
</tbody>
</table>


</div>
</div>

    
    
    
</body>
</html>
