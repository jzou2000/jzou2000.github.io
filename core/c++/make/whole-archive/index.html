<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>My Hugo</title>
    <link rel="stylesheet" type="text/css" href="/css/syntax.css">
    <link rel="stylesheet" type="text/css" href="/css/site.css">
    <script src="/js/nav.js"></script>

    

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>



  </head>

<head>
  <meta charset="utf-8">
    <title>My Hugo</title>
    <link rel="stylesheet" type="text/css" href="/css/syntax.css">
    <link rel="stylesheet" type="text/css" href="/css/site.css">
    <script src="/js/nav.js"></script>

  

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>



</head>

<body>
    
 <div id="menu-container"></div>

 


    
  
<div class="van-content-container">
  <div id="index-container" class="van-content-index"></div>
  <div class="van-content">
    <h1>link whole archive statically</h1>
    <h2 id="why">Why</h2>
<p>By default, only objects that contain (directly) referenced symbols are extracted to the target executable (either an application or a shared object) from an archive by the linker. It is possible that required objects are not linked in some special cases, when they are not directly referenced but are invoked indirectly at runtime, such as:</p>
<ul>
<li>objects created by factory pattern.</li>
<li>callbacks through pointers</li>
<li>place-holders that will be invoked by applications (as a shared object) or external linked shared objects (as a host application)</li>
</ul>
<h2 id="how">How</h2>
<p>The linker has a pair of options to turn on/off the behavior of extracting the whole archive</p>
<ul>
<li>-Wl,&ndash;whole-archive</li>
<li>-Wl,&ndash;no-whole-archive</li>
</ul>
<p>If you don&rsquo;t want to include the whole archive, for example, you just want to include given symbols, you can use</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"> -u symbol
</span></span></code></pre></div><p>to the compiler/linker that the symbol is not referenced.</p>

  </div>
</div>



    
    
    

    
    <script src="/js/menu-module.js"></script>
    <script src="/js/index-module.js"></script>
</body>
</html>
