<!DOCTYPE html>
<html lang="en">




  <head>
    <meta charset="utf-8">
<title>My Hugo</title>
<link rel="stylesheet" type="text/css" href="/css/syntax.css">
<link rel="stylesheet" type="text/css" href="/css/site.css">
<script src="/js/nav.js"></script>

    

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>



  </head>

  <body>
    
 <div id="menu-container"></div>

 


    
  
<div class="van-content-container">
  <div id="index-container" class="van-content-index"></div>
  <div class="van-content">
    <h1>Nm - Show Symbols of a Module</h1>
    <h2 id="nm">NM</h2>
<p><strong>nm</strong> is a utility on posix systems that can list symbols of a module, such as .o, .a, .so, and excutables.
Here are common options</p>
<table>
<thead>
<tr>
<th style="text-align:left">option</th>
<th style="text-align:left">long-option</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-A</td>
<td style="text-align:left">&ndash;print-file-name</td>
<td>filename the symbol is found, useful on archive</td>
</tr>
<tr>
<td style="text-align:left">-o</td>
<td style="text-align:left"></td>
<td>the same with -A</td>
</tr>
<tr>
<td style="text-align:left">-C</td>
<td style="text-align:left">&ndash;demangle<code>[=style]</code></td>
<td>demangle C++ names</td>
</tr>
<tr>
<td style="text-align:left">-g</td>
<td style="text-align:left">&ndash;external-only</td>
<td>external symbols can be accessed by external modules</td>
</tr>
<tr>
<td style="text-align:left">-l</td>
<td style="text-align:left">&ndash;line-numbers</td>
<td>show filename:line for each name, if the debug information is found in the module</td>
</tr>
<tr>
<td style="text-align:left">-u</td>
<td style="text-align:left">&ndash;undefined-only</td>
<td>external symbols referenced</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">&ndash;defined-only</td>
<td>only defined symbols for each object file</td>
</tr>
</tbody>
</table>
<p>The most common types of symbols (upper-case for external symbols)</p>
<table>
<thead>
<tr>
<th>type</th>
<th style="text-align:left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td>B</td>
<td style="text-align:left">in BSS session</td>
</tr>
<tr>
<td>C</td>
<td style="text-align:left">common symbols are uninitialized data</td>
</tr>
<tr>
<td>D</td>
<td style="text-align:left">in the initialized data section</td>
</tr>
<tr>
<td>I</td>
<td style="text-align:left">an indirect reference to another symbol</td>
</tr>
<tr>
<td>R</td>
<td style="text-align:left">in read-only section</td>
</tr>
<tr>
<td>T</td>
<td style="text-align:left">in the text (code) section</td>
</tr>
<tr>
<td>V</td>
<td style="text-align:left">a weak object.  When a weak defined symbol is linked with a normal defined symbol, the normal defined symbol is used with no error.</td>
</tr>
<tr>
<td>U</td>
<td style="text-align:left">undefined</td>
</tr>
<tr>
<td>W</td>
<td style="text-align:left">a weak symbol that has not been specifically tagged as a weak object symbol, e.g. std:: symbols of C++ library</td>
</tr>
</tbody>
</table>
<h2 id="examples">Examples</h2>
<h3 id="shared-object-mymodo">shared-object mymod.o</h3>
<ul>
<li>external-only</li>
<li>demangle C++ symbols</li>
<li>with filename:line</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nm -gCol mymod.so
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">mymod.so:                 w _ITM_deregisterTMCloneTable
</span></span><span class="line"><span class="cl">mymod.so:                 w _ITM_registerTMCloneTable
</span></span><span class="line"><span class="cl">mymod.so:                 U _Unwind_Resume@@GCC_3.0
</span></span><span class="line"><span class="cl">mymod.so:0000000000004d9d T tfactory<span class="o">(</span>char const*<span class="o">)</span>       /home/jasonz/codex/cpp/excpp/exnew/mymod.cpp:10
</span></span><span class="line"><span class="cl">mymod.so:                 U B::B<span class="o">(</span>unsigned long<span class="o">)</span>
</span></span><span class="line"><span class="cl">mymod.so:                 U B::B<span class="o">()</span>
</span></span><span class="line"><span class="cl">mymod.so:                 U B::B<span class="o">(</span>B const<span class="p">&amp;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">mymod.so:                 U B::B<span class="o">(</span>unsigned long<span class="o">)</span>
</span></span><span class="line"><span class="cl">mymod.so:                 U B::B<span class="o">()</span>
</span></span><span class="line"><span class="cl">mymod.so:                 U B::~B<span class="o">()</span>
</span></span><span class="line"><span class="cl">mymod.so:                 U B::operator<span class="o">=(</span>B const<span class="p">&amp;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">mymod.so:000000000000545c T C::C<span class="o">(</span>C const<span class="p">&amp;</span><span class="o">)</span>      /home/jasonz/codex/cpp/excpp/exnew/c.cpp:31
</span></span><span class="line"><span class="cl">mymod.so:00000000000052e2 T C::C<span class="o">(</span>unsigned long<span class="o">)</span> /home/jasonz/codex/cpp/excpp/exnew/c.cpp:27
</span></span><span class="line"><span class="cl">mymod.so:00000000000051c6 T C::C<span class="o">()</span>      /home/jasonz/codex/cpp/excpp/exnew/c.cpp:23
</span></span><span class="line"><span class="cl">mymod.so:000000000000545c T C::C<span class="o">(</span>C const<span class="p">&amp;</span><span class="o">)</span>      /home/jasonz/codex/cpp/excpp/exnew/c.cpp:31
</span></span><span class="line"><span class="cl">mymod.so:00000000000052e2 T C::C<span class="o">(</span>unsigned long<span class="o">)</span> /home/jasonz/codex/cpp/excpp/exnew/c.cpp:27
</span></span><span class="line"><span class="cl">mymod.so:00000000000051c6 T C::C<span class="o">()</span>      /home/jasonz/codex/cpp/excpp/exnew/c.cpp:23
</span></span><span class="line"><span class="cl">mymod.so:00000000000055dc T C::~C<span class="o">()</span>     /home/jasonz/codex/cpp/excpp/exnew/c.cpp:35
</span></span><span class="line"><span class="cl">mymod.so:00000000000055dc T C::~C<span class="o">()</span>     /home/jasonz/codex/cpp/excpp/exnew/c.cpp:35
</span></span><span class="line"><span class="cl">mymod.so:0000000000005680 T C::operator<span class="o">=(</span>C const<span class="p">&amp;</span><span class="o">)</span>      /home/jasonz/codex/cpp/excpp/exnew/c.cpp:39
</span></span><span class="line"><span class="cl">mymod.so:00000000000069b6 W __gnu_cxx::new_allocator&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;::deallocate<span class="o">(</span>std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, unsigned long<span class="o">)</span>     /usr/include/c++/9/ext/new_allocator.h:119
</span></span><span class="line"><span class="cl">mymod.so:0000000000006a2a W __gnu_cxx::new_allocator&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;::allocate<span class="o">(</span>unsigned long, void const*<span class="o">)</span>    /usr/include/c++/9/ext/new_allocator.h:102
</span></span><span class="line"><span class="cl">mymod.so:00000000000069a2 W __gnu_cxx::new_allocator&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;::new_allocator<span class="o">(</span>__gnu_cxx::new_allocator&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; const<span class="p">&amp;</span><span class="o">)</span>        /usr/include/c++/9/ext/new_allocator.h:83
</span></span><span class="line"><span class="cl">mymod.so:0000000000006356 W __gnu_cxx::new_allocator&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;::new_allocator<span class="o">()</span> /usr/include/c++/9/ext/new_allocator.h:80
</span></span><span class="line"><span class="cl">mymod.so:00000000000069a2 W __gnu_cxx::new_allocator&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;::new_allocator<span class="o">(</span>__gnu_cxx::new_allocator&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; const<span class="p">&amp;</span><span class="o">)</span>        /usr/include/c++/9/ext/new_allocator.h:83
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">... and more ...
</span></span></code></pre></div><p>Enhanced with following commands, we get much better result</p>
<ul>
<li>defined-only</li>
<li>filter-out <strong>system</strong> symbols, e.g. glibc, c++, stl</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nm -gCl --defined-only mymod.so<span class="p">|</span> grep -Ev <span class="s1">&#39;(GLIBC|CXX|std::)&#39;</span>
</span></span><span class="line"><span class="cl">0000000000004d9d T tfactory<span class="o">(</span>char const*<span class="o">)</span>        /home/jasonz/codex/cpp/excpp/exnew/mymod.cpp:10
</span></span><span class="line"><span class="cl">000000000000545c T C::C<span class="o">(</span>C const<span class="p">&amp;</span><span class="o">)</span>       /home/jasonz/codex/cpp/excpp/exnew/c.cpp:31
</span></span><span class="line"><span class="cl">00000000000052e2 T C::C<span class="o">(</span>unsigned long<span class="o">)</span>  /home/jasonz/codex/cpp/excpp/exnew/c.cpp:27
</span></span><span class="line"><span class="cl">00000000000051c6 T C::C<span class="o">()</span>       /home/jasonz/codex/cpp/excpp/exnew/c.cpp:23
</span></span><span class="line"><span class="cl">000000000000545c T C::C<span class="o">(</span>C const<span class="p">&amp;</span><span class="o">)</span>       /home/jasonz/codex/cpp/excpp/exnew/c.cpp:31
</span></span><span class="line"><span class="cl">00000000000052e2 T C::C<span class="o">(</span>unsigned long<span class="o">)</span>  /home/jasonz/codex/cpp/excpp/exnew/c.cpp:27
</span></span><span class="line"><span class="cl">00000000000051c6 T C::C<span class="o">()</span>       /home/jasonz/codex/cpp/excpp/exnew/c.cpp:23
</span></span><span class="line"><span class="cl">00000000000055dc T C::~C<span class="o">()</span>      /home/jasonz/codex/cpp/excpp/exnew/c.cpp:35
</span></span><span class="line"><span class="cl">00000000000055dc T C::~C<span class="o">()</span>      /home/jasonz/codex/cpp/excpp/exnew/c.cpp:35
</span></span><span class="line"><span class="cl"><span class="m">0000000000005680</span> T C::operator<span class="o">=(</span>C const<span class="p">&amp;</span><span class="o">)</span>       /home/jasonz/codex/cpp/excpp/exnew/c.cpp:39
</span></span><span class="line"><span class="cl"><span class="m">0000000000005764</span> T C::show<span class="o">()</span> const      /home/jasonz/codex/cpp/excpp/exnew/c.cpp:48
</span></span><span class="line"><span class="cl">0000000000009db8 V typeinfo <span class="k">for</span> C
</span></span><span class="line"><span class="cl">000000000000718a V typeinfo name <span class="k">for</span> C
</span></span><span class="line"><span class="cl">0000000000009da0 V vtable <span class="k">for</span> C
</span></span><span class="line"><span class="cl">0000000000004d59 T operator delete<span class="o">[](</span>void*<span class="o">)</span>     /home/jasonz/codex/cpp/excpp/exnew/mymod.cpp:8
</span></span><span class="line"><span class="cl">0000000000004d15 T operator delete<span class="o">(</span>void*<span class="o">)</span>       /home/jasonz/codex/cpp/excpp/exnew/mymod.cpp:8
</span></span><span class="line"><span class="cl">000000000000619b W operator delete<span class="o">(</span>void*, void*<span class="o">)</span>        /usr/include/c++/9/new:179
</span></span><span class="line"><span class="cl">0000000000004cb7 T operator new<span class="o">[](</span>unsigned long<span class="o">)</span>        /home/jasonz/codex/cpp/excpp/exnew/mymod.cpp:8
</span></span><span class="line"><span class="cl">0000000000004c59 T operator new<span class="o">(</span>unsigned long<span class="o">)</span>  /home/jasonz/codex/cpp/excpp/exnew/mymod.cpp:8
</span></span><span class="line"><span class="cl"><span class="m">0000000000006185</span> W operator new<span class="o">(</span>unsigned long, void*<span class="o">)</span>   /usr/include/c++/9/new:173
</span></span></code></pre></div><p>Usually undefined symbols are those referenced in shared libraries.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> nm -gCl -u mymod.so<span class="p">|</span> grep -Ev <span class="s1">&#39;(GLIBC|CXX|std::)&#39;</span>
</span></span><span class="line"><span class="cl">                 w _ITM_deregisterTMCloneTable
</span></span><span class="line"><span class="cl">                 w _ITM_registerTMCloneTable
</span></span><span class="line"><span class="cl">                 U _Unwind_Resume@@GCC_3.0
</span></span><span class="line"><span class="cl">                 U B::B<span class="o">(</span>unsigned long<span class="o">)</span>
</span></span><span class="line"><span class="cl">                 U B::B<span class="o">()</span>
</span></span><span class="line"><span class="cl">                 U B::B<span class="o">(</span>B const<span class="p">&amp;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">                 U B::B<span class="o">(</span>unsigned long<span class="o">)</span>
</span></span><span class="line"><span class="cl">                 U B::B<span class="o">()</span>
</span></span><span class="line"><span class="cl">                 U B::~B<span class="o">()</span>
</span></span><span class="line"><span class="cl">                 U B::operator<span class="o">=(</span>B const<span class="p">&amp;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">                 U B::buf<span class="o">()</span> const
</span></span><span class="line"><span class="cl">                 U B::size<span class="o">()</span> const
</span></span><span class="line"><span class="cl">                 U typeinfo <span class="k">for</span> B
</span></span><span class="line"><span class="cl">                 w __gmon_start__
</span></span></code></pre></div><p>for example, <code>B::*</code> are defined in <code>libutil.so</code> when <code>mymod.so</code> is linked with</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-make" data-lang="make"><span class="line"><span class="cl"><span class="nf">mymod.so</span><span class="o">:</span> <span class="n">mymod</span>.<span class="n">o</span> <span class="n">c</span>.<span class="n">o</span> <span class="n">libutil</span>.<span class="n">so</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CXX<span class="k">)</span> -o <span class="nv">$@</span> -shared <span class="k">$(</span>filter %.o, $^<span class="k">)</span>  -lutil
</span></span></code></pre></div>
  </div>
</div>



    
    
    

    
    <script src="/js/menu-module.js"></script>
    <script src="/js/index-module.js"></script>
  </body>

</html>
