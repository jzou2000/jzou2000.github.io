<!DOCTYPE html>
<html lang="en">




  <head>
    <meta charset="utf-8">
<title>My Hugo</title>
<link rel="stylesheet" type="text/css" href="/css/syntax.css">
<link rel="stylesheet" type="text/css" href="/css/site.css">
<script src="/js/nav.js"></script>

    

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>



  </head>

  <body>
    
 <div id="menu-container"></div>

 


    
  
<div class="van-content-container">
  <div id="index-container" class="van-content-index"></div>
  <div class="van-content">
    <h1>Job</h1>
    <table>
<thead>
<tr>
<th style="text-align:left">API</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">get_job_info(name, depth=0, fetch_all_builds=False)</td>
<td style="text-align:left">Get job information dictionary</td>
</tr>
<tr>
<td style="text-align:left">get_job_info_regex(pattern, depth=0, folder_depth=0)</td>
<td style="text-align:left">Get a list of jobs information that contain names which match the</td>
</tr>
<tr>
<td style="text-align:left">regex pattern.</td>
<td></td>
</tr>
<tr>
<td style="text-align:left">get_job_name(name)</td>
<td style="text-align:left">Return the name of a job using the API.</td>
</tr>
<tr>
<td style="text-align:left">debug_job_info(job_name)</td>
<td style="text-align:left">Print out job info in more readable format.</td>
</tr>
<tr>
<td style="text-align:left">get_jobs(folder_depth=0, view_name=None)</td>
<td style="text-align:left">Get list of jobs.</td>
</tr>
<tr>
<td style="text-align:left">get_all_jobs(folder_depth=None)</td>
<td style="text-align:left">Get list of all jobs recursively to the given folder depth.</td>
</tr>
<tr>
<td style="text-align:left">copy_job(from_name, to_name)</td>
<td style="text-align:left">Copy a Jenkins job.</td>
</tr>
<tr>
<td style="text-align:left">rename_job(from_name, to_name)</td>
<td style="text-align:left">Rename an existing Jenkins job</td>
</tr>
<tr>
<td style="text-align:left">delete_job(name)</td>
<td style="text-align:left">Delete Jenkins job permanently.</td>
</tr>
<tr>
<td style="text-align:left">enable_job(name)</td>
<td style="text-align:left">Enable Jenkins job.</td>
</tr>
<tr>
<td style="text-align:left">disable_job(name)</td>
<td style="text-align:left">Disable Jenkins job.</td>
</tr>
<tr>
<td style="text-align:left">job_exists(name)</td>
<td style="text-align:left">Check whether a job exists</td>
</tr>
<tr>
<td style="text-align:left">jobs_count()</td>
<td style="text-align:left">Get the number of jobs on the Jenkins server</td>
</tr>
<tr>
<td style="text-align:left">assert_job_exists(name, exception_message=&lsquo;job[%s] does not exist&rsquo;)</td>
<td style="text-align:left">Raise an exception if a job does not exist</td>
</tr>
<tr>
<td style="text-align:left">create_job(name, config_xml)</td>
<td style="text-align:left">Create a new Jenkins job</td>
</tr>
<tr>
<td style="text-align:left">get_job_config(name)</td>
<td style="text-align:left">Get configuration of existing Jenkins job.</td>
</tr>
<tr>
<td style="text-align:left">reconfig_job(name, config_xml)</td>
<td style="text-align:left">Change configuration of existing Jenkins job.</td>
</tr>
<tr>
<td style="text-align:left">build_job_url(name, parameters=None, token=None)</td>
<td style="text-align:left">Get URL to trigger build job.</td>
</tr>
<tr>
<td style="text-align:left">build_job(name, parameters=None, token=None)</td>
<td style="text-align:left">Trigger build job.</td>
</tr>
<tr>
<td style="text-align:left">wipeout_job_workspace(name)</td>
<td style="text-align:left">Wipe out workspace for given Jenkins job.</td>
</tr>
</tbody>
</table>
<h2 id="working-with-job">working with job</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">server</span><span class="o">.</span><span class="n">create_job</span><span class="p">(</span><span class="s1">&#39;empty&#39;</span><span class="p">,</span> <span class="n">jenkins</span><span class="o">.</span><span class="n">EMPTY_CONFIG_XML</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">jobs</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">get_jobs</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span> <span class="n">jobs</span>
</span></span><span class="line"><span class="cl"><span class="n">my_job</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">get_job_config</span><span class="p">(</span><span class="s1">&#39;cool-job&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">my_job</span><span class="p">)</span> <span class="c1"># prints XML configuration</span>
</span></span><span class="line"><span class="cl"><span class="n">server</span><span class="o">.</span><span class="n">build_job</span><span class="p">(</span><span class="s1">&#39;empty&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">server</span><span class="o">.</span><span class="n">disable_job</span><span class="p">(</span><span class="s1">&#39;empty&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">server</span><span class="o">.</span><span class="n">copy_job</span><span class="p">(</span><span class="s1">&#39;empty&#39;</span><span class="p">,</span> <span class="s1">&#39;empty_copy&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">server</span><span class="o">.</span><span class="n">enable_job</span><span class="p">(</span><span class="s1">&#39;empty_copy&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">server</span><span class="o">.</span><span class="n">reconfig_job</span><span class="p">(</span><span class="s1">&#39;empty_copy&#39;</span><span class="p">,</span> <span class="n">jenkins</span><span class="o">.</span><span class="n">RECONFIG_XML</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">server</span><span class="o">.</span><span class="n">delete_job</span><span class="p">(</span><span class="s1">&#39;empty&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">server</span><span class="o">.</span><span class="n">delete_job</span><span class="p">(</span><span class="s1">&#39;empty_copy&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># build a parameterized job</span>
</span></span><span class="line"><span class="cl"><span class="c1"># requires creating and configuring the api-test job to accept &#39;param1&#39; &amp; &#39;param2&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">server</span><span class="o">.</span><span class="n">build_job</span><span class="p">(</span><span class="s1">&#39;api-test&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;param1&#39;</span><span class="p">:</span> <span class="s1">&#39;test value 1&#39;</span><span class="p">,</span> <span class="s1">&#39;param2&#39;</span><span class="p">:</span> <span class="s1">&#39;test value 2&#39;</span><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="n">last_build_number</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">get_job_info</span><span class="p">(</span><span class="s1">&#39;api-test&#39;</span><span class="p">)[</span><span class="s1">&#39;lastCompletedBuild&#39;</span><span class="p">][</span><span class="s1">&#39;number&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">build_info</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">get_build_info</span><span class="p">(</span><span class="s1">&#39;api-test&#39;</span><span class="p">,</span> <span class="n">last_build_number</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span> <span class="n">build_info</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># get all jobs from the specific view</span>
</span></span><span class="line"><span class="cl"><span class="n">jobs</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">get_jobs</span><span class="p">(</span><span class="n">view_name</span><span class="o">=</span><span class="s1">&#39;View Name&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span> <span class="n">jobs</span>
</span></span></code></pre></div><h2 id="get_job_infoname-depth0-fetch_all_buildsfalse">get_job_info(name, depth=0, fetch_all_builds=False)</h2>
<p>Get job information dictionary.</p>
<p>Parameters:</p>
<ul>
<li>name – Job name, str</li>
<li>depth – JSON depth, int</li>
<li>fetch_all_builds – If true, all builds will be retrieved from Jenkins. Otherwise,  Jenkins will only return the most recent 100 builds. This comes at the expense of an additional API call which may return significant amounts of data. bool</li>
</ul>
<p>Returns:</p>
<ul>
<li>dictionary of job information</li>
</ul>
<h2 id="get_job_info_regexpattern-depth0-folder_depth0">get_job_info_regex(pattern, depth=0, folder_depth=0)</h2>
<p>Get a list of jobs information that contain names which match the
regex pattern.</p>
<p>Parameters:</p>
<ul>
<li>pattern – regex pattern, str</li>
<li>depth – JSON depth, int</li>
<li>folder_depth – folder level depth to search int</li>
</ul>
<p>Returns:</p>
<ul>
<li>List of jobs info, list</li>
</ul>
<h2 id="get_job_namename">get_job_name(name)</h2>
<p>Return the name of a job using the API.</p>
<p>That is roughly an identity method which can be used to quickly verify a job exists or is accessible without causing too much stress on the server side.</p>
<p>Parameters:</p>
<ul>
<li>name – Job name, str</li>
</ul>
<p>Returns:</p>
<ul>
<li>Name of job or None</li>
</ul>
<h2 id="debug_job_infojob_name">debug_job_info(job_name)</h2>
<p>Print out job info in more readable format.</p>
<h2 id="get_jobsfolder_depth0-view_namenone">get_jobs(folder_depth=0, view_name=None)</h2>
<p>Get list of jobs.</p>
<p>Each job is a dictionary with ‘name’, ‘url’, ‘color’ and ‘fullname’ keys.</p>
<p>If the view_name parameter is present, the list of jobs will be limited to only those configured in the specified view. In this case, the job dictionary ‘fullname’ key would be equal to the job name.</p>
<p>Parameters:</p>
<ul>
<li>folder_depth – Number of levels to search, int. By default 0, which will limit search to toplevel. None disables the limit.</li>
<li>view_name – Name of a Jenkins view for which to retrieve jobs, str. By default, the job list is not limited to a specific view.</li>
</ul>
<p>Returns:</p>
<ul>
<li>list of jobs, [{str: str, str: str, str: str, str: str}]</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">jobs</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">get_jobs</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">jobs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">[{</span>
</span></span><span class="line"><span class="cl">    <span class="sa">u</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;all_tests&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="sa">u</span><span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;http://your_url.here/job/all_tests/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="sa">u</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="sa">u</span><span class="s1">&#39;fullname&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;all_tests&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">}]</span>
</span></span></code></pre></div><h2 id="get_all_jobsfolder_depthnone">get_all_jobs(folder_depth=None)</h2>
<p>Get list of all jobs recursively to the given folder depth.</p>
<p>Each job is a dictionary with ‘name’, ‘url’, ‘color’ and ‘fullname’ keys.</p>
<p>Parameters:</p>
<ul>
<li>folder_depth – Number of levels to search, int. By default None, which will search all levels. 0 limits to toplevel.
Returns:</li>
<li>list of jobs, [ { str: str} ]</li>
</ul>
<p>Note</p>
<p>On instances with many folders it may be more efficient to use the run_script method to retrieve all jobs instead.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">server</span><span class="o">.</span><span class="n">run_script</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    import groovy.json.JsonBuilder;
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    // get all projects excluding matrix configuration
</span></span></span><span class="line"><span class="cl"><span class="s2">    // as they are simply part of a matrix project.
</span></span></span><span class="line"><span class="cl"><span class="s2">    // there may be better ways to get just jobs
</span></span></span><span class="line"><span class="cl"><span class="s2">    items = Jenkins.instance.getAllItems(AbstractProject);
</span></span></span><span class="line"><span class="cl"><span class="s2">    items.removeAll {
</span></span></span><span class="line"><span class="cl"><span class="s2">      it instanceof hudson.matrix.MatrixConfiguration
</span></span></span><span class="line"><span class="cl"><span class="s2">    };
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    def json = new JsonBuilder()
</span></span></span><span class="line"><span class="cl"><span class="s2">    def root = json {
</span></span></span><span class="line"><span class="cl"><span class="s2">      jobs items.collect {
</span></span></span><span class="line"><span class="cl"><span class="s2">        [
</span></span></span><span class="line"><span class="cl"><span class="s2">          name: it.name,
</span></span></span><span class="line"><span class="cl"><span class="s2">          url: Jenkins.instance.getRootUrl() + it.getUrl(),
</span></span></span><span class="line"><span class="cl"><span class="s2">          color: it.getIconColor().toString(),
</span></span></span><span class="line"><span class="cl"><span class="s2">          fullname: it.getFullName()
</span></span></span><span class="line"><span class="cl"><span class="s2">        ]
</span></span></span><span class="line"><span class="cl"><span class="s2">      }
</span></span></span><span class="line"><span class="cl"><span class="s2">    }
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    // use json.toPrettyString() if viewing
</span></span></span><span class="line"><span class="cl"><span class="s2">    println json.toString()
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="copy_jobfrom_name-to_name">copy_job(from_name, to_name)</h2>
<p>Copy a Jenkins job.</p>
<p>Will raise an exception whenever the source and destination folder for this jobs won’t be the same.</p>
<p>Parameters:</p>
<ul>
<li>from_name – Name of Jenkins job to copy from, str</li>
<li>to_name – Name of Jenkins job to copy to, str</li>
</ul>
<p>Throws:</p>
<ul>
<li>JenkinsException whenever the source and destination folder are not the same</li>
</ul>
<h2 id="rename_jobfrom_name-to_name">rename_job(from_name, to_name)</h2>
<p>Rename an existing Jenkins job</p>
<p>Will raise an exception whenever the source and destination folder for this jobs won’t be the same.</p>
<p>Parameters:</p>
<ul>
<li>from_name – Name of Jenkins job to rename, str</li>
<li>to_name – New Jenkins job name, str</li>
</ul>
<p>Throws:</p>
<ul>
<li>JenkinsException whenever the source and destination folder are not the same</li>
</ul>
<h2 id="delete_jobname">delete_job(name)</h2>
<p>Delete Jenkins job permanently.</p>
<p>Parameters:</p>
<ul>
<li>name – Name of Jenkins job, str</li>
</ul>
<h2 id="enable_jobname">enable_job(name)</h2>
<p>Enable Jenkins job.</p>
<p>Parameters:</p>
<ul>
<li>name – Name of Jenkins job, str</li>
</ul>
<h2 id="disable_jobname">disable_job(name)</h2>
<p>Disable Jenkins job.</p>
<p>To re-enable, call Jenkins.enable_job().</p>
<p>Parameters:</p>
<ul>
<li>name – Name of Jenkins job, str</li>
</ul>
<h2 id="job_existsname">job_exists(name)</h2>
<p>Check whether a job exists</p>
<p>Parameters:</p>
<ul>
<li>name – Name of Jenkins job, str</li>
</ul>
<p>Returns:</p>
<ul>
<li>True if Jenkins job exists</li>
</ul>
<h2 id="jobs_count">jobs_count()</h2>
<p>Get the number of jobs on the Jenkins server</p>
<p>Returns:</p>
<ul>
<li>Total number of jobs, int</li>
</ul>
<p>Note</p>
<p>On instances with many folders it may be more efficient to use the run_script method to retrieve the total number of jobs instead.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># get all projects excluding matrix configuration</span>
</span></span><span class="line"><span class="cl"><span class="c1"># as they are simply part of a matrix project.</span>
</span></span><span class="line"><span class="cl"><span class="n">server</span><span class="o">.</span><span class="n">run_script</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;print(Hudson.instance.getAllItems(&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;    hudson.model.AbstractProject).count{&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;        !(it instanceof hudson.matrix.MatrixConfiguration)&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;    })&#34;</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="assert_job_existsname-exception_messagejobs-does-not-exist">assert_job_exists(name, exception_message=&lsquo;job[%s] does not exist&rsquo;)</h2>
<p>Raise an exception if a job does not exist</p>
<p>Parameters:</p>
<ul>
<li>name – Name of Jenkins job, str</li>
<li>exception_message – Message to use for the exception. Formatted with name</li>
</ul>
<p>Throws:</p>
<ul>
<li>JenkinsException whenever the job does not exist</li>
</ul>
<h2 id="create_jobname-config_xml">create_job(name, config_xml)</h2>
<p>Create a new Jenkins job</p>
<p>Parameters:</p>
<ul>
<li>name – Name of Jenkins job, str</li>
<li>config_xml – config file text, str</li>
</ul>
<h2 id="get_job_configname">get_job_config(name)</h2>
<p>Get configuration of existing Jenkins job.</p>
<p>Parameters:</p>
<ul>
<li>name – Name of Jenkins job, str
Returns:</li>
<li>job configuration (XML format)</li>
</ul>
<h2 id="reconfig_jobname-config_xml">reconfig_job(name, config_xml)</h2>
<p>Change configuration of existing Jenkins job.</p>
<p>To create a new job, see Jenkins.create_job().</p>
<p>Parameters:</p>
<ul>
<li>name – Name of Jenkins job, str</li>
<li>config_xml – New XML configuration, str</li>
</ul>
<h2 id="build_job_urlname-parametersnone-tokennone">build_job_url(name, parameters=None, token=None)</h2>
<p>Get URL to trigger build job.</p>
<p>Authenticated setups may require configuring a token on the server side.</p>
<p>Use list of two membered tuples to supply parameters with multi select options.</p>
<p>Parameters:</p>
<ul>
<li>name – Name of Jenkins job, str</li>
<li>parameters – parameters for job, or None., dict or list of two membered tuples</li>
<li>token – (optional) token for building job, str</li>
</ul>
<p>Returns:</p>
<ul>
<li>URL for building job</li>
</ul>
<h2 id="build_jobname-parametersnone-tokennone">build_job(name, parameters=None, token=None)</h2>
<p>Trigger build job.</p>
<p>This method returns a queue item number that you can pass to Jenkins.get_queue_item(). Note that this queue number is only valid for about five minutes after the job completes, so you should get/poll the queue information as soon as possible to determine the job’s URL.</p>
<p>Parameters:</p>
<ul>
<li>name – name of job</li>
<li>parameters – parameters for job, or None, dict</li>
<li>token – Jenkins API token</li>
</ul>
<p>Returns:</p>
<ul>
<li>int queue item</li>
</ul>
<h2 id="wipeout_job_workspacename">wipeout_job_workspace(name)</h2>
<p>Wipe out workspace for given Jenkins job.</p>
<p>Parameters:</p>
<ul>
<li>name – Name of Jenkins job, str</li>
</ul>

  </div>
</div>



    
    
    

    
    <script src="/js/menu-module.js"></script>
    <script src="/js/index-module.js"></script>
  </body>

</html>
